/*! For license information please see Grammarly-check.js.LICENSE.txt */
var t={57238:(t,e,n)=>{var r=n(65747),i="chrome-extension://__MSG_@@extension_id__/",o="moz-extension://__MSG_@@extension_id__/",s="safari-web-extension://__MSG_@@extension_id__/",c=self.GR_RESOURCE_ROOT||i,a=self.GR_RESOURCE_ROOT||o,u=self.GR_RESOURCE_ROOT||s;t.exports={__css:r.toString().replace(new RegExp(i,"g"),c).replace(new RegExp(o,"g"),a).replace(new RegExp(s,"g"),u),...r.locals}},65747:(t,e,n)=>{var r=n(93476)((function(t){return t[1]}));r.push([t.id,"._3Spqv-animatedUnderline{visibility:hidden;position:fixed;}._3Spqv-animatedUnderline:after{content:'';position:absolute;visibility:visible;height:3px;bottom:0;border-radius:10px;background:#488cc8;animation:_15P6d-showUnderline 1.3s ease forwards}._3Spqv-animatedUnderline._1jDIx-completeAnimation:after{animation:_15P6d-showUnderline .2s ease forwards}@keyframes _15P6d-showUnderline{0%{width:0%}100%{width:100%}}._28F_K-checkAnimatedUnderline{animation:_15P6d-showUnderline 2s ease forwards;}._28F_K-checkAnimatedUnderline._1jDIx-completeAnimation{animation:_15P6d-showUnderline .2s ease forwards}",""]),r.locals={animatedUnderline:"_3Spqv-animatedUnderline",showUnderline:"_15P6d-showUnderline",completeAnimation:"_1jDIx-completeAnimation",checkAnimatedUnderline:"_28F_K-checkAnimatedUnderline"},t.exports=r},93476:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=t(e);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,r){"string"==typeof t&&(t=[[null,t,""]]);var i={};if(r)for(var o=0;o<this.length;o++){var s=this[o][0];null!=s&&(i[s]=!0)}for(var c=0;c<t.length;c++){var a=[].concat(t[c]);r&&i[a[0]]||(n&&(a[2]?a[2]="".concat(n," and ").concat(a[2]):a[2]=n),e.push(a))}},e}},52961:t=>{t.exports={animatedUnderline:"_24bLp",showUnderline:"jF640",completeAnimation:"gNDOL"}},39335:(t,e,n)=>{var r={superfasthash:n(11028),murmurhash3:n(13786)};t.exports={createHash:function(t){t=t.replace(/![a-zA-z0-9]/g,"").toLowerCase();try{return r[t]}catch(t){throw new Error(t)}}}},13786:(t,e,n)=>{var r=n(81314);function i(t,e){return(65535&t)*e+(((t>>>16)*e&65535)<<16)}function o(t,e){return t<<e|t>>>32-e}function s(t){return t=i(t^=t>>>16,2246822507),t=i(t^=t>>>13,3266489909),t^=t>>>16}function c(t,e){t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]],e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]];var n=[0,0,0,0];return n[3]+=t[3]+e[3],n[2]+=n[3]>>>16,n[3]&=65535,n[2]+=t[2]+e[2],n[1]+=n[2]>>>16,n[2]&=65535,n[1]+=t[1]+e[1],n[0]+=n[1]>>>16,n[1]&=65535,n[0]+=t[0]+e[0],n[0]&=65535,[n[0]<<16|n[1],n[2]<<16|n[3]]}function a(t,e){t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]],e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]];var n=[0,0,0,0];return n[3]+=t[3]*e[3],n[2]+=n[3]>>>16,n[3]&=65535,n[2]+=t[2]*e[3],n[1]+=n[2]>>>16,n[2]&=65535,n[2]+=t[3]*e[2],n[1]+=n[2]>>>16,n[2]&=65535,n[1]+=t[1]*e[3],n[0]+=n[1]>>>16,n[1]&=65535,n[1]+=t[2]*e[2],n[0]+=n[1]>>>16,n[1]&=65535,n[1]+=t[3]*e[1],n[0]+=n[1]>>>16,n[1]&=65535,n[0]+=t[0]*e[3]+t[1]*e[2]+t[2]*e[1]+t[3]*e[0],n[0]&=65535,[n[0]<<16|n[1],n[2]<<16|n[3]]}function u(t,e){return 32===(e%=64)?[t[1],t[0]]:e<32?[t[0]<<e|t[1]>>>32-e,t[1]<<e|t[0]>>>32-e]:(e-=32,[t[1]<<e|t[0]>>>32-e,t[0]<<e|t[1]>>>32-e])}function l(t,e){return 0===(e%=64)?t:e<32?[t[0]<<e|t[1]>>>32-e,t[1]<<e]:[t[1]<<e-32,0]}function f(t,e){return[t[0]^e[0],t[1]^e[1]]}function h(t){return t=f(t,[0,t[0]>>>1]),t=f(t=a(t,[4283543511,3981806797]),[0,t[0]>>>1]),t=f(t=a(t,[3301882366,444984403]),[0,t[0]>>>1])}var d=function(t,e){t=""+t||"";var n=r.toU8IntArray(t);e=e||0;for(var i=(t={charCodeAt:function(t){return n[t]},length:n.length}).length%16,o=t.length-i,s=[0,e],d=[0,e],p=[0,0],b=[0,0],g=[2277735313,289559509],m=[1291169091,658871167],v=0;v<o;v+=16)p=[255&t.charCodeAt(v+4)|(255&t.charCodeAt(v+5))<<8|(255&t.charCodeAt(v+6))<<16|(255&t.charCodeAt(v+7))<<24,255&t.charCodeAt(v)|(255&t.charCodeAt(v+1))<<8|(255&t.charCodeAt(v+2))<<16|(255&t.charCodeAt(v+3))<<24],b=[255&t.charCodeAt(v+12)|(255&t.charCodeAt(v+13))<<8|(255&t.charCodeAt(v+14))<<16|(255&t.charCodeAt(v+15))<<24,255&t.charCodeAt(v+8)|(255&t.charCodeAt(v+9))<<8|(255&t.charCodeAt(v+10))<<16|(255&t.charCodeAt(v+11))<<24],p=u(p=a(p,g),31),s=c(s=u(s=f(s,p=a(p,m)),27),d),s=c(a(s,[0,5]),[0,1390208809]),b=u(b=a(b,m),33),d=c(d=u(d=f(d,b=a(b,g)),31),s),d=c(a(d,[0,5]),[0,944331445]);switch(p=[0,0],b=[0,0],i){case 15:b=f(b,l([0,t.charCodeAt(v+14)],48));case 14:b=f(b,l([0,t.charCodeAt(v+13)],40));case 13:b=f(b,l([0,t.charCodeAt(v+12)],32));case 12:b=f(b,l([0,t.charCodeAt(v+11)],24));case 11:b=f(b,l([0,t.charCodeAt(v+10)],16));case 10:b=f(b,l([0,t.charCodeAt(v+9)],8));case 9:b=a(b=f(b,[0,t.charCodeAt(v+8)]),m),d=f(d,b=a(b=u(b,33),g));case 8:p=f(p,l([0,t.charCodeAt(v+7)],56));case 7:p=f(p,l([0,t.charCodeAt(v+6)],48));case 6:p=f(p,l([0,t.charCodeAt(v+5)],40));case 5:p=f(p,l([0,t.charCodeAt(v+4)],32));case 4:p=f(p,l([0,t.charCodeAt(v+3)],24));case 3:p=f(p,l([0,t.charCodeAt(v+2)],16));case 2:p=f(p,l([0,t.charCodeAt(v+1)],8));case 1:p=a(p=f(p,[0,t.charCodeAt(v)]),g),s=f(s,p=a(p=u(p,31),m))}return s=c(s=f(s,[0,t.length]),d=f(d,[0,t.length])),d=c(d,s),s=c(s=h(s),d=h(d)),d=c(d,s),("00000000"+(s[0]>>>0).toString(16)).slice(-8)+("00000000"+(s[1]>>>0).toString(16)).slice(-8)+("00000000"+(d[0]>>>0).toString(16)).slice(-8)+("00000000"+(d[1]>>>0).toString(16)).slice(-8)};t.exports={x86Hash32:function(t,e){t=""+t||"";var n=r.toU8IntArray(t);e=e||0;for(var c=(t={charCodeAt:function(t){return n[t]},length:n.length}).length%4,a=t.length-c,u=e,l=0,f=3432918353,h=461845907,d=0;d<a;d+=4)l=i(l=255&t.charCodeAt(d)|(255&t.charCodeAt(d+1))<<8|(255&t.charCodeAt(d+2))<<16|(255&t.charCodeAt(d+3))<<24,f),l=i(l=o(l,15),h),u=i(u=o(u^=l,13),5)+3864292196;switch(l=0,c){case 3:l^=(255&t.charCodeAt(d+2))<<16;case 2:l^=(255&t.charCodeAt(d+1))<<8;case 1:l=i(l^=255&t.charCodeAt(d),f),u^=l=i(l=o(l,15),h)}return((u=s(u^=t.length))>>>0).toString(16)},x86Hash128:function(t,e){t=""+t||"";var n=r.toU8IntArray(t);e=e||0;for(var c=(t={charCodeAt:function(t){return n[t]},length:n.length}).length%16,a=t.length-c,u=e,l=e,f=e,h=e,d=0,p=0,b=0,g=0,m=597399067,v=2869860233,y=951274213,_=2716044179,w=0;w<a;w+=16)d=255&t.charCodeAt(w)|(255&t.charCodeAt(w+1))<<8|(255&t.charCodeAt(w+2))<<16|(255&t.charCodeAt(w+3))<<24,p=255&t.charCodeAt(w+4)|(255&t.charCodeAt(w+5))<<8|(255&t.charCodeAt(w+6))<<16|(255&t.charCodeAt(w+7))<<24,b=255&t.charCodeAt(w+8)|(255&t.charCodeAt(w+9))<<8|(255&t.charCodeAt(w+10))<<16|(255&t.charCodeAt(w+11))<<24,g=255&t.charCodeAt(w+12)|(255&t.charCodeAt(w+13))<<8|(255&t.charCodeAt(w+14))<<16|(255&t.charCodeAt(w+15))<<24,d=o(d=i(d,m),15),u=o(u^=d=i(d,v),19),u=i(u+=l,5)+1444728091,p=o(p=i(p,v),16),l=o(l^=p=i(p,y),17),l=i(l+=f,5)+197830471,b=o(b=i(b,y),17),f=o(f^=b=i(b,_),15),f=i(f+=h,5)+2530024501,g=o(g=i(g,_),18),h=o(h^=g=i(g,m),13),h=i(h+=u,5)+850148119;switch(d=0,p=0,b=0,g=0,c){case 15:g^=t.charCodeAt(w+14)<<16;case 14:g^=t.charCodeAt(w+13)<<8;case 13:g=i(g^=t.charCodeAt(w+12),_),h^=g=i(g=o(g,18),m);case 12:b^=t.charCodeAt(w+11)<<24;case 11:b^=t.charCodeAt(w+10)<<16;case 10:b^=t.charCodeAt(w+9)<<8;case 9:b=i(b^=t.charCodeAt(w+8),y),f^=b=i(b=o(b,17),_);case 8:p^=t.charCodeAt(w+7)<<24;case 7:p^=t.charCodeAt(w+6)<<16;case 6:p^=t.charCodeAt(w+5)<<8;case 5:p=i(p^=t.charCodeAt(w+4),v),l^=p=i(p=o(p,16),y);case 4:d^=t.charCodeAt(w+3)<<24;case 3:d^=t.charCodeAt(w+2)<<16;case 2:d^=t.charCodeAt(w+1)<<8;case 1:d=i(d^=t.charCodeAt(w),m),u^=d=i(d=o(d,15),v)}return u^=t.length,u+=l^=t.length,u+=f^=t.length,l+=u+=h^=t.length,f+=u,h+=u,u=s(u),u+=l=s(l),u+=f=s(f),l+=u+=h=s(h),f+=u,h+=u,("00000000"+(u>>>0).toString(16)).slice(-8)+("00000000"+(l>>>0).toString(16)).slice(-8)+("00000000"+(f>>>0).toString(16)).slice(-8)+("00000000"+(h>>>0).toString(16)).slice(-8)},x64Hash64:function(t,e){return d(t,e).slice(8)},x64Hash128:d,hash:function(t,e){return d(t,e)}}},11028:(t,e,n)=>{var r=n(81314);function i(t,e){return t[e]<<8|t[e+1]}t.exports={hash:function(t){var e,n=r.toU8IntArray(t+""),o=0;if(!t)return o.toString(16);var s=n.length,c=0;e=3&s,s>>>=2;for(var a=0;a<s;a++)o=(o+=i(n,c))<<16^(i(n,c+2)<<11^o),c+=4,o+=o>>11;switch(e){case 3:o+=i(n,c),o^=o<<16,o^=n[c+2]<<18,o+=o>>11;break;case 2:o+=i(n,c),o^=o<<11,o+=o>>17;break;case 1:o+=n[c],o^=o<<10,o+=o>>1}return o^=o<<3,o+=o>>5,o^=o<<4,o+=o>>17,o^=o<<25,o+=o>>6,r.intToUnsignedHex(o)}}},81314:t=>{t.exports={toU8IntArray:function(t){for(var e=[],n=[],r=0;r<t.length;r++){var i,o=t.charCodeAt(r);for(n.length=0;(i=255&o)||o;)n.push(i),o>>>=8;e=e.concat(n.reverse())}return e},intToUnsignedHex:function(t){for(var e,n=[];(e=65535&t)||t;)e=e.toString(16),e="0000".slice(e.length)+e,n.push(e),t>>>=16;return n.reverse().join("")}}},27061:t=>{var e,n,r=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(t){if(e===setTimeout)return setTimeout(t,0);if((e===i||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(n){try{return e.call(null,t,0)}catch(n){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:i}catch(t){e=i}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(t){n=o}}();var c,a=[],u=!1,l=-1;function f(){u&&c&&(u=!1,c.length?a=c.concat(a):l=-1,a.length&&h())}function h(){if(!u){var t=s(f);u=!0;for(var e=a.length;e;){for(c=a,a=[];++l<e;)c&&c[l].run();l=-1,e=a.length}c=null,u=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function p(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];a.push(new d(t,e)),1!==a.length||u||s(h)},d.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=p,r.addListener=p,r.once=p,r.off=p,r.removeListener=p,r.removeAllListeners=p,r.emit=p,r.prependListener=p,r.prependOnceListener=p,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}}},e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={id:r,exports:{}};return t[r](i,i.exports,n),i.exports}n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t={};n.r(t),n.d(t,{emitBackground:()=>en,emitError:()=>We,emitFocusedTab:()=>tn,emitTabs:()=>Xe,emitTo:()=>Qe,getTopFrameId:()=>Ze,init:()=>ze,initMessage:()=>$e,off:()=>Je,on:()=>Ke,onBackgroundPortReconnect:()=>He,one:()=>Ye,promiseBackground:()=>nn});n(39335);function e(){return self.chrome&&self.chrome.runtime&&self.chrome.runtime.lastError}function r(t,e){const n=r.items=r.items||{},i=n[t];if(i||e){if(i&&!e)return clearTimeout(i),void delete n[t];!function(){function r(){i(),t()}function i(){const i=setTimeout(r,e);n[t]=i}i()}()}}function i(){return(65536*(1+Math.random())|0).toString(16).substring(1)}function o(){return i()+i()+"-"+i()+"-"+i()+"-"+i()+"-"+i()+i()+i()}function s(t){return new Promise((e=>setTimeout(e,t)))}!function(t){t.items={}}(r||(r={}));new RegExp(String.fromCharCode(160),"g"),String.fromCharCode(160),new RegExp("\n"+String.fromCharCode(32),"g");const c=o();function a(t,e,n,r,i=!1){if(null==t)return;const o=t;if("string"!=typeof e)return Object.keys(e).forEach((t=>{e[t]&&a(o,t,e[t],r)}));{if(!n)return;const t=o[c]||[];return o[c]=t,r?(o[c]=t.filter((t=>!(t.event===e&&t.cb===n))),o.removeEventListener(e,n,i)):(t.push({event:e,cb:n}),o.addEventListener(e,n,i)),{el:o,event:e,cb:n,bubble:i}}}var u;function l(t){return new Promise(((e,n)=>Promise.resolve(t).then(n,e)))}!function(t){function e(t){return new Promise(t)}t.create=e,t.createCompletionSource=function(){let t,e;return{promise:new Promise(((n,r)=>{t=n,e=r})),resolve(e){t(e)},reject(t){e(t)}}},t.sync=function(t){return e(((e,n)=>e(t())))},t.delay=function(e){return t.create((t=>{setTimeout((()=>{t()}),e)}))}}(u||(u={}));Error;function f(t,e){return t.some((t=>t===e))?e:void 0}class h extends Error{constructor(t){super("Matching not exhaustive"+(t?`: unexpected value ${t}`:""))}}function d(t){throw new h(t)}function p(t){const e=parseInt(t,10);return isNaN(e)?void 0:e}function b(t,e){try{return t()}catch(t){return e(t)}}function g(){}function m(t,e,n){const r=n();return t>0?r.catch((r=>new Promise(((t,n)=>setTimeout(t,e))).then((r=>m(t-1,e,n))))):r}var v;!function(t){function e(){return(65536*(1+Math.random())|0).toString(16).substring(1)}t.create=function(){return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}}(v||(v={}));void 0!==self.requestIdleCallback&&self.requestIdleCallback;class y extends Error{constructor(t){super(`Assertion failed: ${t?"string"==typeof t?t:t():"(unnamed)"}`)}}function _(t,e){if(null==t)throw new y((()=>e?`Expected ${e} to be non-null`:"Expected non-null"));return t}var w,x,E,S,A,C;function I(t,e){return t.filter((t=>!!t)).join(e)}!function(t){const e={chromiumWebExtension:"chromeExt",firefoxWebExtension:"firefoxExt",safariAppExtension:"safariExt",safariWebExtension:"safariWebExt",safariIOSWebExtension:"safariIOSExt"};function n(t,n){return"edge"===t?"chromiumEdgeExt":e[n]}t.getAppName=n,t.create=function(t,e,r){return{appName:_(n(t,e),"gnar app name"),url:`https://gnar.${r}`,domain:`.${r}`,sendEmailInfoTracking:!0,sendFluidExperimentData:!1}}}(w||(w={})),function(t){const e={chromiumWebExtension:"extensionChrome",firefoxWebExtension:"extensionFirefox",safariAppExtension:"extensionSafari",safariWebExtension:"extensionSafariWeb",safariIOSWebExtension:"extensionSafariIOS"};t.create=function(t,n,r){return{appName:"edge"===t?"extensionEdge":_(e[n],"felog app name"),sendUsageMetrics:!0,sendPerfMetricsType:"dev"===r?"local":Math.random()<=.01?"send":"off"}}}(x||(x={})),function(t){const e={chromiumWebExtension:"extension_chrome",firefoxWebExtension:"extension_firefox",safariAppExtension:"extension_safari",safariWebExtension:"safariWebExtension",safariIOSWebExtension:"safariWebExtension"};t.create=(t,n)=>({appName:"edge"===t?"extension_chromium_edge":_(e[n],"capi app name")})}(E||(E={})),function(t){t.create=function(t){return{urls:{fetchMessages:`${t}/api/v1/messages`,acknowledgeMessage:`${t}/api/v1/messages/acknowledge`,dismissMessage:`${t}/api/v1/messages/dismiss`}}}}(S||(S={})),function(t){t.create=function(t,e,n,r){const i="safari"===t?"disableAppsPromotion=true":"";function o(t){const n=`https://${t}.${e}`;return(t="",e="")=>{const r=I([i,e],"&");return I([n+t,r],"?")}}const s=o("www"),c=o("app"),a=o("account"),u=o("redirect"),l=`https://data.${e}`,f=`https://auth.${e}/v3`,h=`wss://capi.${e}/freews`,d=`https://goldengate.${e}/snippets/v1/snippets`,p=`https://goldengate.${e}/client-controls`;return{accountSubscription:a("/subscription"),accountSubscriptionChangePlan:a("/subscription","popup=switchToAnnualOffer"),accountSubscriptionAddBillingInfo:a("/admin/subscription","popup=add_billing_info"),adminAccountSubscription:a("/admin/subscription"),accountAdminSubscriptionAddBillingInfoToUngatedTrial:a("/admin/subscription","popup=ungated_trial"),app:c(),appPersonalDictionary:a("/customize"),capi:h,capiGDocs:`wss://capi.${e}/gdocs`,dapiMimic:`${l}/api/mimic`,dapiProps:`${l}/api/props/v2`,dapiFindProps:`${l}/api/props/v2/find`,editorDictionary:c("/profile/dictionary"),dictionary:`https://capi.${e}/api/defs`,docs:c("/docs"),docsApi:`https://dox.${e}/documents`,newDoc:c("/docs/new"),userOrAnonymous:`${f}/user/oranonymous`,userData:`${f}/user/userdata`,authSignin:`${f}/api/login`,authSignup:`${f}/api/signup`,authExchange:`${f}/api/unified-login/code/exchange`,authLogout:`${f}/logout`,signin:s("/signin"),signup:s("/signup"),fbSignin:s("/signin","fromExtensionFb=true"),fbSignup:s("/signup","fromExtensionFb=true"),googleSignin:s("/signin","fromExtensionGoogle=true"),googleSignup:s("/signup","fromExtensionGoogle=true"),resetPassword:s("/resetpassword"),newFelog:n,sumoLogic:r,boomerangReviewerUI:s("/boomerang?linkId="),welcomeC:s("/extension-success"),afterInstall:s("/after_install_page/"),upgrade:s("/upgrade"),planComparison:s("/plans"),businessEHomepage:s("/business/e"),businessPricing:s("/business/pricing"),uninstall:s("/extension-uninstall"),terms:s("/terms"),policy:s("/privacy-policy"),californiaPolicy:s("/privacy-policy#for-california-users"),extensionSuccess:s("/extension-success"),firefoxPrivatePolicy:"https://addons.mozilla.org/en-US/firefox/addon/grammarly-1/privacy/",dynamicConfigUrl:"https://d27xxe7juh1us6.cloudfront.net/dynamicConfig.json",pageConfigUrl:"https://d27xxe7juh1us6.cloudfront.net/browserplugin/config.json",grammarlyDomain:e,grammarlyProtocol:"https:",redirect:u("/redirect"),snippetsApi:d,snippetsNew:a("/admin/snippets","action=create"),snippetsAdmin:a("/admin/snippets"),snippetsSettings:a("/customize/snippets"),clientControlsApi:p,suggestionsSettings:a("/customize/suggestions"),allSettings:a(),grammarlyIdeasSelf:c("/ideas/grow/self"),grammarlyIdeasPeer:c("/ideas/grow/peer"),grammarlyIdeasSales:c("/ideas/sales"),iOSApp:"grammarly://home"}}}(A||(A={})),function(t){const e="grammarly.com",n="qagr.io";t.create=function(t,r,i){const o=(t,e,n)=>"prod"===i?t:"qa"===i?e:"dev"===i?n:d(i),s="https://127.0.0.1:8000",c=o("https://f-log-extension.grammarly.io",s,s),a=o("https://endpoint2.collection.us2.sumologic.com/receiver/v1/http/ZaVnC4dhaV1OF-4ic11yqpre0casnyvs_ZoaCHciEYdRyBkrfwP6DMlsWt8tSVU76RPqgGvAGjXGQk_UNuxPx-pYbToJapM_Fr0CUcgKaA8_IVl-lhSr5Q==",s,s),u=o(e,n,n),l="https://chipmunk.grammarly.com",f=o(l,l,l);return{url:A.create(t,"grammarly.com",c,a),gnar:w.create(t,r,u),felog:x.create(t,r,i),capi:E.create(t,r),chipmunk:S.create(f),extensionId:"87677a2c52b84ad3a151a4a72f5bd3c4"}}}(C||(C={}));const T=b((()=>browser),(()=>self.browser)),k=b((()=>browser),(()=>self.browser));self.chrome=self.chrome;var O,P,R,D,N,j,L,F,U,M;!function(t){t.create=function(t,e,n,r,i,o,s,c){const a=void 0!==o&&void 0!==s?o:"UNVERSIONED",u=`${t}.${e}.${n}`;return{version:u,fullVersion:`${u}-${[r,["prod"!==i?i:null,a!==r?a:null].filter((t=>!!t)).join(".")].filter((t=>""!==t)).join("/")}`,commitHash:s,gitBranch:o,manifestVersion:c}},t.getManifestVersion=function(t,e,n){switch(t){case"safariAppExtension":switch(e){case"bg":case"popup":return n.safari.extension.displayVersion;default:return}case"chromiumWebExtension":return n.chrome.runtime.getManifest().version;case"firefoxWebExtension":return T.runtime.getManifest().version;case"safariWebExtension":case"safariIOSWebExtension":return k.runtime.getManifest().version;default:return d(t)}}}(O||(O={})),function(t){t.create=function(t){return f(["chrome","safari","firefox","edge"],t)},t.isValidTargetBrowser=function(t){return["chrome","safari","firefox","edge"].includes(t)},t.detect=function(t){return t.chrome&&/google/i.test(t.navigator.vendor)?t.navigator.appVersion.indexOf("Edg")>-1?"edge":"chrome":-1!==t.navigator.userAgent.indexOf("Firefox")?"firefox":/^((?!chrome).)*safari/i.test(t.navigator.userAgent)?"safari":void 0}}(P||(P={})),function(t){t.create=function(t){return f(["dev","prod","qa"],t)}}(R||(R={})),function(t){t.create=function(t){return f(["chromiumWebExtension","firefoxWebExtension","safariAppExtension","safariWebExtension","safariIOSWebExtension"],t)}}(D||(D={})),function(t){t.create=function(t,e,n,r){return{browser:t,extensionType:e,env:n,context:r}}}(N||(N={})),function(t){t.create=function(t){return{type:P.detect(t)||"other"}}}(j||(j={})),function(t){t.create=function(t){return{isWindows:-1!==t.navigator.appVersion.indexOf("Win"),isMac:-1!==t.navigator.appVersion.indexOf("Mac"),isChromeOS:-1!==t.navigator.appVersion.indexOf("CrOS")}}}(L||(L={})),function(t){t.create=function(t){return{browser:j.create(t),os:L.create(t)}}}(F||(F={})),function(t){function e(t,e,n,r,i,o,s){return{env:t,major_number:e,build_number:n,release_number:r,git_branch:i,git_commit:o,manifest_version:s}}t.create=e,t.fromBrowserify=function(){return e("prod","14","1027","0","UNVERSIONED","UNVERSIONED","2")}}(U||(U={})),function(t){t.getTargetEnv=function(t){if(!t.env)throw new Error("processEnv.env is null or undefined");const e=R.create(t.env);if(!e)throw new Error(`Invalid processEnv.env: ${t.env}`);return e},t.create=function(t,e,n,r,i){const o=[r.major_number,r.build_number,r.release_number].map(p);let s;if(3===o.length&&o.every((t=>void 0!==t)))s=o;else{let t;try{t=O.getManifestVersion(e,n,self)}catch(t){}const r=(t||"").split(".").map(p);s=3===r.length&&r.every((t=>void 0!==t))?r:[0,0,0]}const[c,a,u]=s;return{buildInfo:O.create(c,a,u,t,i,r.git_branch,r.git_commit,r.manifest_version),bundleInfo:N.create(t,e,i,n),appConfig:C.create(t,e,i),systemInfo:F.create(self)}}}(M||(M={}));const B=new class{constructor(t){this._getFallbackValue=t}init(t){if(void 0!==this._value)throw new Error("Global value already initialized.");this._value=t}get(){if(void 0===this._value){if(void 0===this._getFallbackValue)throw new Error("Global value not initialized and no fallback value provided.");this._value=this._getFallbackValue()}return this._value}}((()=>{throw new Error("Global config not initialized")}));let $=()=>B.get();function V(){return $()}function G(){return"edge"===V().bundleInfo.browser}function q(){return"bg"===V().bundleInfo.context}function H(){return V().bundleInfo.browser}var W;!function(t){t.TRACE="TRACE",t.DEBUG="DEBUG",t.INFO="INFO",t.WARN="WARN",t.ERROR="ERROR",t.FATAL="FATAL"}(W||(W={}));const z={[W.TRACE]:1,[W.DEBUG]:2,[W.INFO]:3,[W.WARN]:4,[W.ERROR]:5,[W.FATAL]:6};function Y(t){return z[t]||0}class K{constructor(t){this.name=t,this._isError=t=>{const e=t;return e&&(void 0!==e.message&&void 0!==e.name||void 0!==e.stack)}}trace(t,e,n){this._logMessage(W.TRACE,t,e,n)}debug(t,e,n){this._logMessage(W.DEBUG,t,e,n)}info(t,e,n){this._logMessage(W.INFO,t,e,n)}warn(t,e,n){this._logMessage(W.WARN,t,e,n)}error(t,e,n){this._logMessage(W.ERROR,t,e,n)}fatal(t,e,n){this._logMessage(W.FATAL,t,e,n)}_logMessage(t,e,n,r){const i={level:t,loggerName:this.name,message:e,timestamp:new Date};n&&(this._isError(n)?i.exception=n:i.data=n),i.data=i.data||r,this.handleEvent(i)}}class J{constructor(t,e){this.name=t,this._createLogger=e}trace(t,e,n){void 0===this._logger&&(this._logger=this._createLogger(this.name)),this._logger.trace(t,e,n)}debug(t,e,n){void 0===this._logger&&(this._logger=this._createLogger(this.name)),this._logger.debug(t,e,n)}info(t,e,n){void 0===this._logger&&(this._logger=this._createLogger(this.name)),this._logger.info(t,e,n)}warn(t,e,n){void 0===this._logger&&(this._logger=this._createLogger(this.name)),this._logger.warn(t,e,n)}error(t,e,n){void 0===this._logger&&(this._logger=this._createLogger(this.name)),this._logger.error(t,e,n)}fatal(t,e,n){void 0===this._logger&&(this._logger=this._createLogger(this.name)),this._logger.fatal(t,e,n)}}class X{constructor(t){if(this.capacity=t,this._start=0,this._end=0,this._isFull=!1,t<=0)throw new Error("Invalid capacity "+t);this._buffer=new Array(t)}get size(){return this._isFull?this._buffer.length:(this._end-this._start+this._buffer.length)%this._buffer.length}get isEmpty(){return 0===this.size}get isFull(){return this._isFull}get head(){return this.isEmpty?null:this._buffer[this._start]}get tail(){return this.isEmpty?null:this._buffer[0===this._end?this.capacity-1:this._end-1]}enqueue(t){let e=null;return this.isFull&&(e=this._buffer[this._start],this._startInc()),this._buffer[this._end]=t,this._endInc(),this._start===this._end&&(this._isFull=!0),e}dequeue(){if(this.isEmpty)return null;const t=this._buffer[this._start];return this._buffer[this._start]=null,this._startInc(),this._isFull=!1,t}delete(t){const e=this._buffer.indexOf(t);if(e>=0){if(e<this._end){for(let t=e;t<this._end-1;t++)this._buffer[t]=this._buffer[t+1];this._buffer[--this._end]=null}else{for(let t=this._start;t<e;t++)this._buffer[t+1]=this._buffer[t];this._buffer[this._start]=null,this._startInc()}return this._isFull=!1,!0}return!1}_startInc(){this._start++,this._start===this.capacity&&(this._start=0)}_endInc(){this._end++,this._end===this.capacity&&(this._end=0)}clear(){this._buffer=new Array(this.capacity),this._start=this._end=0,this._isFull=!1}toArray(){let t;if(this.isEmpty)t=[];else if(this._start<this._end)t=this._buffer.slice(this._start,this._end);else{t=new Array(this.size);let e=0;for(let n=this._start;n<this.capacity;++n,++e)t[e]=this._buffer[n];for(let n=0;n<this._end;++n,++e)t[e]=this._buffer[n]}return t}}let Q;class Z extends K{constructor(t,e,n){super(t),this._config=e,this._historyArgs=n,this._historyEnabled=()=>{var t;return Boolean("prod"!==V().bundleInfo.env||(null===(t=this._historyArgs.enabledInProd)||void 0===t?void 0:t.get()))},this._setupHistoryDownload=()=>{var t;void 0===Q&&(Q=new X(null!==(t=this._historyArgs.maxEventsToStore)&&void 0!==t?t:1e3),self.GRDownloadReport=()=>{var t,e,n;if(this._historyEnabled()){const r=t=>{try{return JSON.stringify(t)}catch(e){return`${t}`}},i=[["Level","Logger","Timestamp","Message"].join("\t"),...Q.toArray().map((t=>{const e=[t.level,t.loggerName,t.timestamp.toISOString(),t.message];return t.data&&e.push(r(t.data)),t.exception&&e.push(r(t.exception)),e.join("\t")}))].join("\n");if(self.document){const e=self.document.createElement("a");e.href="data:application/octet-stream,"+encodeURIComponent(i),e.target="_blank",e.download=null!==(t=this._historyArgs.downloadFileName)&&void 0!==t?t:"grammarly-logs.tsv",e.click()}null===(n=(e=this._historyArgs).onDownload)||void 0===n||n.call(e)}})},this._setupHistoryDownload()}handleEvent(t){this._config.filterFn(t)&&this._config.writer.write(t),this._historyEnabled()&&(null==Q||Q.enqueue(t))}}function tt(t){return new Proxy({},{get(e,n){const r=t[n];return r&&"function"==typeof r?r.bind(t):void 0}})}class et{constructor(){this._writeFunc=et._commonWriteFunc}write(t){try{const e=[`grm ${t.level} 【${t.loggerName}】░░ ${t.message}`];t.data&&e.push(t.data),t.exception&&e.push(t.exception),this._writeFunc[t.level].apply(null,e)}catch(t){}}}et._commonWriteFunc=function(){const{log:t,info:e,warn:n,error:r}=tt(console);return{[W.TRACE]:t,[W.DEBUG]:t,[W.INFO]:e,[W.WARN]:n,[W.ERROR]:r,[W.FATAL]:r}}();var nt=function(t,e){return(nt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function rt(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}nt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}Object.create;Object.create;function it(t){return"function"==typeof t}var ot=!1,st={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){t&&(new Error).stack;ot=t},get useDeprecatedSynchronousErrorHandling(){return ot}};function ct(t){setTimeout((function(){throw t}),0)}var at={closed:!0,next:function(t){},error:function(t){if(st.useDeprecatedSynchronousErrorHandling)throw t;ct(t)},complete:function(){}},ut=function(){return Array.isArray||function(t){return t&&"number"==typeof t.length}}();function lt(t){return null!==t&&"object"==typeof t}var ft=function(){function t(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(t,e){return e+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t}(),ht=function(){function t(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}return t.prototype.unsubscribe=function(){var e;if(!this.closed){var n=this,r=n._parentOrParents,i=n._ctorUnsubscribe,o=n._unsubscribe,s=n._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,r instanceof t)r.remove(this);else if(null!==r)for(var c=0;c<r.length;++c){r[c].remove(this)}if(it(o)){i&&(this._unsubscribe=void 0);try{o.call(this)}catch(t){e=t instanceof ft?dt(t.errors):[t]}}if(ut(s)){c=-1;for(var a=s.length;++c<a;){var u=s[c];if(lt(u))try{u.unsubscribe()}catch(t){e=e||[],t instanceof ft?e=e.concat(dt(t.errors)):e.push(t)}}}if(e)throw new ft(e)}},t.prototype.add=function(e){var n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){var r=n;(n=new t)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var i=n._parentOrParents;if(null===i)n._parentOrParents=this;else if(i instanceof t){if(i===this)return n;n._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return n;i.push(this)}var o=this._subscriptions;return null===o?this._subscriptions=[n]:o.push(n),n},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}},t.EMPTY=function(t){return t.closed=!0,t}(new t),t}();function dt(t){return t.reduce((function(t,e){return t.concat(e instanceof ft?e.errors:e)}),[])}var pt=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),bt=function(t){function e(n,r,i){var o=t.call(this)||this;switch(o.syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=at;break;case 1:if(!n){o.destination=at;break}if("object"==typeof n){n instanceof e?(o.syncErrorThrowable=n.syncErrorThrowable,o.destination=n,n.add(o)):(o.syncErrorThrowable=!0,o.destination=new gt(o,n));break}default:o.syncErrorThrowable=!0,o.destination=new gt(o,n,r,i)}return o}return rt(e,t),e.prototype[pt]=function(){return this},e.create=function(t,n,r){var i=new e(t,n,r);return i.syncErrorThrowable=!1,i},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this},e}(ht),gt=function(t){function e(e,n,r,i){var o,s=t.call(this)||this;s._parentSubscriber=e;var c=s;return it(n)?o=n:n&&(o=n.next,r=n.error,i=n.complete,n!==at&&(it((c=Object.create(n)).unsubscribe)&&s.add(c.unsubscribe.bind(c)),c.unsubscribe=s.unsubscribe.bind(s))),s._context=c,s._next=o,s._error=r,s._complete=i,s}return rt(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;st.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,n=st.useDeprecatedSynchronousErrorHandling;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):ct(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;ct(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};st.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){if(this.unsubscribe(),st.useDeprecatedSynchronousErrorHandling)throw t;ct(t)}},e.prototype.__tryOrSetError=function(t,e,n){if(!st.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(e){return st.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=e,t.syncErrorThrown=!0,!0):(ct(e),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(bt);var mt=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}();function vt(t){return t}function yt(t){return 0===t.length?vt:1===t.length?t[0]:function(e){return t.reduce((function(t,e){return e(t)}),e)}}var _t=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(t,e,n){var r=this.operator,i=function(t,e,n){if(t){if(t instanceof bt)return t;if(t[pt])return t[pt]()}return t||e||n?new bt(t,e,n):new bt(at)}(t,e,n);if(r?i.add(r.call(i,this.source)):i.add(this.source||st.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),st.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){st.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),!function(t){for(;t;){var e=t,n=e.closed,r=e.destination,i=e.isStopped;if(n||i)return!1;t=r&&r instanceof bt?r:null}return!0}(t)?console.warn(e):t.error(e)}},t.prototype.forEach=function(t,e){var n=this;return new(e=wt(e))((function(e,r){var i;i=n.subscribe((function(e){try{t(e)}catch(t){r(t),i&&i.unsubscribe()}}),r,e)}))},t.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},t.prototype[mt]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?this:yt(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=wt(t))((function(t,n){var r;e.subscribe((function(t){return r=t}),(function(t){return n(t)}),(function(){return t(r)}))}))},t.create=function(e){return new t(e)},t}();function wt(t){if(t||(t=st.Promise||Promise),!t)throw new Error("no Promise impl found");return t}var xt=function(){function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t}(),Et=function(t){function e(e,n){var r=t.call(this)||this;return r.subject=e,r.subscriber=n,r.closed=!1,r}return rt(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},e}(ht),St=function(t){function e(e){var n=t.call(this,e)||this;return n.destination=e,n}return rt(e,t),e}(bt),At=function(t){function e(){var e=t.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return rt(e,t),e.prototype[pt]=function(){return new St(this)},e.prototype.lift=function(t){var e=new Ct(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new xt;if(!this.isStopped)for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].next(t)},e.prototype.error=function(t){if(this.closed)throw new xt;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new xt;this.isStopped=!0;for(var t=this.observers,e=t.length,n=t.slice(),r=0;r<e;r++)n[r].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new xt;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new xt;return this.hasError?(t.error(this.thrownError),ht.EMPTY):this.isStopped?(t.complete(),ht.EMPTY):(this.observers.push(t),new Et(this,t))},e.prototype.asObservable=function(){var t=new _t;return t.source=this,t},e.create=function(t,e){return new Ct(t,e)},e}(_t),Ct=function(t){function e(e,n){var r=t.call(this)||this;return r.destination=e,r.source=n,r}return rt(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):ht.EMPTY},e}(At),It=function(t){function e(e){var n=t.call(this)||this;return n._value=e,n}return rt(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(e){var n=t.prototype._subscribe.call(this,e);return n&&!n.closed&&e.next(this._value),n},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new xt;return this._value},e.prototype.next=function(e){t.prototype.next.call(this,this._value=e)},e}(At);function Tt(){}var kt=function(){function t(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}return t.prototype.call=function(t,e){return e.subscribe(new Ot(t,this.nextOrObserver,this.error,this.complete))},t}(),Ot=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o._tapNext=Tt,o._tapError=Tt,o._tapComplete=Tt,o._tapError=r||Tt,o._tapComplete=i||Tt,it(n)?(o._context=o,o._tapNext=n):n&&(o._context=n,o._tapNext=n.next||Tt,o._tapError=n.error||Tt,o._tapComplete=n.complete||Tt),o}return rt(e,t),e.prototype._next=function(t){try{this._tapNext.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.next(t)},e.prototype._error=function(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)},e.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()},e}(bt);function Pt(){return function(t){return t.lift(new Rt(t))}}var Rt=function(){function t(t){this.connectable=t}return t.prototype.call=function(t,e){var n=this.connectable;n._refCount++;var r=new Dt(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i},t}(),Dt=function(t){function e(e,n){var r=t.call(this,e)||this;return r.connectable=n,r}return rt(e,t),e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,e>1)this.connection=null;else{var n=this.connection,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null},e}(bt),Nt=function(t){function e(e,n){var r=t.call(this)||this;return r.source=e,r.subjectFactory=n,r._refCount=0,r._isComplete=!1,r}return rt(e,t),e.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},e.prototype.getSubject=function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject},e.prototype.connect=function(){var t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new ht).add(this.source.subscribe(new Lt(this.getSubject(),this))),t.closed&&(this._connection=null,t=ht.EMPTY)),t},e.prototype.refCount=function(){return Pt()(this)},e}(_t),jt=function(){var t=Nt.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}}(),Lt=function(t){function e(e,n){var r=t.call(this,e)||this;return r.connectable=n,r}return rt(e,t),e.prototype._error=function(e){this._unsubscribe(),t.prototype._error.call(this,e)},e.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}},e}(St);var Ft=function(){function t(t,e){this.subjectFactory=t,this.selector=e}return t.prototype.call=function(t,e){var n=this.selector,r=this.subjectFactory(),i=n(r).subscribe(t);return i.add(e.subscribe(r)),i},t}();function Ut(){return new At}function Mt(){return function(t){return Pt()((e=Ut,function(t){var r;if(r="function"==typeof e?e:function(){return e},"function"==typeof n)return t.lift(new Ft(r,n));var i=Object.create(t,jt);return i.source=t,i.subjectFactory=r,i})(t));var e,n}}function Bt(t,e){return function(n){return n.lift(new qt(t,e))}}var $t,Vt,Gt,qt=function(){function t(t,e){this.predicate=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new Ht(t,this.predicate,this.thisArg))},t}(),Ht=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.predicate=n,i.thisArg=r,i.count=0,i}return rt(e,t),e.prototype._next=function(t){var e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}e&&this.destination.next(t)},e}(bt);function Wt(t,e){return function(n,r){return e(n(t(r)),r)}}function zt(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}function Yt(t,e){return Object.prototype.hasOwnProperty.call(e,t)}function Kt(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}!function(t){t.optic=function(t,e){return{get:t,set:e,modify:Wt(t,e)}}}($t||($t={})),function(t){t.create=function t(e,n){return{get:e,set:n,modify:Wt(e,n),compose:function(r){return t((function(t){var n=e(t);return void 0!==n?r.get(n):void 0}),(function(t,i){var o=e(i);return void 0!==o?n(r.set(t,o),i):i}))}}}}(Vt||(Vt={})),function(t){function e(t,n){return{get:t,set:n,modify:Wt(t,n),compose:function(r){return e((function(e){return r.get(t(e))}),(function(e,i){return n(r.set(e,t(i)),i)}))}}}t.create=e,t.compose=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(0===t.length)throw new TypeError("Can not compose zero lenses. You probably want `Lens.identity`.");if(1===t.length)return t[0];var n=t[0];return t.slice(1).forEach((function(t){n=n.compose(t)})),n};var n=e((function(t){return t}),(function(t,e){return t}));t.identity=function(){return n};var r=Vt.create((function(t){}),(function(t,e){return e}));t.nothing=function(){return r}}(Gt||(Gt={}));var Jt,Xt,Qt,Zt,te=function(){var t=Object.prototype.toString;return"[object Arguments]"===t.call(arguments)?function(e){return"[object Arguments]"===t.call(e)}:function(t){return Yt("callee",t)}}(),ee=(Jt=!{toString:null}.propertyIsEnumerable("toString"),Xt=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],Qt=function(){return arguments.propertyIsEnumerable("length")}(),Zt=function(t,e){for(var n=0;n<t.length;){if(t[n]===e)return!0;n+=1}return!1},"function"!=typeof Object.keys||Qt?function(t){if(Object(t)!==t)return[];var e,n,r=[],i=Qt&&te(t);for(e in t)!Yt(e,t)||i&&"length"===e||(r[r.length]=e);if(Jt)for(n=Xt.length-1;n>=0;)Yt(e=Xt[n],t)&&!Zt(r,e)&&(r[r.length]=e),n-=1;return r}:function(t){return Object(t)!==t?[]:Object.keys(t)});function ne(t){return null===t?"Null":void 0===t?"Undefined":Object.prototype.toString.call(t).slice(8,-1)}function re(t,e,n,r){if(void 0===n&&(n=[]),void 0===r&&(r=[]),Kt(t,e))return!0;if(ne(t)!==ne(e))return!1;if(null==t||null==e)return!1;if("function"==typeof t.equals||"function"==typeof e.equals)return"function"==typeof t.equals&&t.equals(e)&&"function"==typeof e.equals&&e.equals(t);switch(ne(t)){case"Arguments":case"Array":case"Object":if("function"==typeof t.constructor&&"Promise"===(i=t.constructor,null==(o=String(i).match(/^function (\w*)/))?"":o[1]))return t===e;break;case"Boolean":case"Number":case"String":if(typeof t!=typeof e||!Kt(t.valueOf(),e.valueOf()))return!1;break;case"Date":if(!Kt(t.valueOf(),e.valueOf()))return!1;break;case"Error":return t.name===e.name&&t.message===e.message;case"RegExp":if(t.source!==e.source||t.global!==e.global||t.ignoreCase!==e.ignoreCase||t.multiline!==e.multiline||t.sticky!==e.sticky||t.unicode!==e.unicode)return!1;break;case"Map":case"Set":if(!re(zt(t.entries()),zt(e.entries()),n,r))return!1;break;case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var i,o,s=ee(t);if(s.length!==ee(e).length)return!1;for(var c=n.length-1;c>=0;){if(n[c]===t)return r[c]===e;c-=1}for(n.push(t),r.push(e),c=s.length-1;c>=0;){var a=s[c];if(!Yt(a,e)||!re(e[a],t[a],n,r))return!1;c-=1}return n.pop(),r.pop(),!0}var ie=void 0!==n(27061)&&!1;function oe(t,e,n){if(t in n&&re(e,n[t]))return n;var r={};for(var i in n)r[i]=n[i];return r[t]=e,r}function se(t){return function(e,n){return function(t,e){return re(t,e)?e:t}(t(e,n),n)}}var ce=new RegExp(["^","function","\\(","[^), ]+","\\)","\\{",'("use strict";)?',"return\\s","[^\\.]+\\.(\\S+?);?","\\}","$"].join("\\s*"));new RegExp(["^","function","\\(","[^), ]+","\\)","\\{",'("use strict";)?',"(\\$_\\$wf\\(\\d+\\);)?","return\\s","(\\$_\\$w\\(\\d+, \\d+\\),\\s)?","[^\\.]+\\.(\\S+?);?","\\}","$"].join("\\s*"));function ae(t){return function(t){var e=ce,n=t.match(e);if(n&&n[2])return n[2].split(".");throw new TypeError('Expected a property expression, got "'+t+'".\n\n      A property expression should be a referentially transparent (no side-effects),\n      single-expression "getter" function.\n\n      Correct example: "function (x) { return x.some }" or "x => x.some".\n      Incorrect example: "function (x) { var y = x.some; return y }" or "({some}) => some"')}(t.toString())}function ue(t){return void 0===t?function(t){return Gt.create((function(e){return e[t]}),(function(e,n){return oe(t,e,n)}))}:Gt.create((function(e){return e[t]}),(function(e,n){return oe(t,e,n)}))}var le=0;function fe(t){if(le<10){le++;var e="x."+t.join("."),n="'"+t.join("', '")+"'";!function(t){"undefined"!=typeof console&&"function"==typeof console.error&&console.error("[Focal]: "+t);try{throw new Error(t)}catch(t){}}("The property expression overload of Atom.lens and Lens.prop are deprecated and will be removed in next versions of Focal. Please use the key name overload for Atom.lens and Lens.key instead. You can convert your code by changing the calls:\n  a.lens(x => "+e+") to a.lens("+n+"),\n  Lens.prop((x: T) => "+e+") to Lens.key<T>()("+n+").")}}function he(t){return t&&"function"==typeof t.schedule}Gt.key=ue,Gt.prop=function(t){var e=ae(t);return ie&&fe(e),Gt.compose.apply(Gt,e.map(ue()))},Gt.index=function(t){if(t<0)throw new TypeError(t+" is not a valid array index, expected >= 0");return Vt.create((function(e){return e[t]}),(function(e,n){return n.length<=t?n.concat(Array(t-n.length),[e]):re(e,n[t])?n:n.slice(0,t).concat([e],n.slice(t+1))}))},Gt.withDefault=function(t){return Gt.replace(void 0,t)},Gt.replace=function(t,e){return Gt.create((function(n){return re(n,t)?e:n}),se((function(n){return re(n,e)?t:n})))},Gt.find=function(t){return e=function(e){var n=function(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return n;return-1}(e,t);return n<0?Gt.nothing():Gt.index(n)},Gt.create((function(t){return e(t).get(t)}),(function(t,n){return e(n).set(t,n)}));var e};var de=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return rt(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(bt),pe=function(t){function e(e,n,r){var i=t.call(this)||this;return i.parent=e,i.outerValue=n,i.outerIndex=r,i.index=0,i}return rt(e,t),e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(bt),be=function(t){return function(e){for(var n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}};function ge(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}var me=ge(),ve=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t};function ye(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}var _e=function(t){if(t&&"function"==typeof t[mt])return r=t,function(t){var e=r[mt]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(ve(t))return be(t);if(ye(t))return n=t,function(t){return n.then((function(e){t.closed||(t.next(e),t.complete())}),(function(e){return t.error(e)})).then(null,ct),t};if(t&&"function"==typeof t[me])return e=t,function(t){for(var n=e[me]();;){var r=void 0;try{r=n.next()}catch(e){return t.error(e),t}if(r.done){t.complete();break}if(t.next(r.value),t.closed)break}return"function"==typeof n.return&&t.add((function(){n.return&&n.return()})),t};var e,n,r,i=lt(t)?"an invalid object":"'"+t+"'";throw new TypeError("You provided "+i+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function we(t,e,n,r,i){if(void 0===i&&(i=new pe(t,n,r)),!i.closed)return e instanceof _t?e.subscribe(i):_e(e)(i)}function xe(t,e){return new _t((function(n){var r=new ht,i=0;return r.add(e.schedule((function(){i!==t.length?(n.next(t[i++]),n.closed||r.add(this.schedule())):n.complete()}))),r}))}function Ee(t,e){return e?xe(t,e):new _t(be(t))}var Se={};function Ae(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=void 0,r=void 0;return he(t[t.length-1])&&(r=t.pop()),"function"==typeof t[t.length-1]&&(n=t.pop()),1===t.length&&ut(t[0])&&(t=t[0]),Ee(t,r).lift(new Te(n))}var Ce,Ie,Te=function(){function t(t){this.resultSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new ke(t,this.resultSelector))},t}(),ke=function(t){function e(e,n){var r=t.call(this,e)||this;return r.resultSelector=n,r.active=0,r.values=[],r.observables=[],r}return rt(e,t),e.prototype._next=function(t){this.values.push(Se),this.observables.push(t)},e.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(var n=0;n<e;n++){var r=t[n];this.add(we(this,r,void 0,n))}}},e.prototype.notifyComplete=function(t){0==(this.active-=1)&&this.destination.complete()},e.prototype.notifyNext=function(t,e,n){var r=this.values,i=r[n],o=this.toRespond?i===Se?--this.toRespond:this.toRespond:0;r[n]=e,0===o&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))},e.prototype._tryResultSelector=function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(de),Oe=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Pe=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,c=o.length;s<c;s++,i++)r[i]=o[s];return r},Re=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Oe(e,t),e.prototype.view=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return void 0!==t[0]?"function"==typeof t[0]?new Le(this,t[0]):"string"==typeof t[0]?new Le(this,Gt.compose.apply(Gt,t.map(Gt.key())).get):new Le(this,(function(e){return t[0].get(e)})):this},e}(It),De=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Oe(e,t),e.prototype.set=function(t){this.modify((function(){return t}))},e.prototype.lens=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return new je(this,"function"==typeof t?Gt.prop(t):"string"==typeof t?Gt.compose.apply(Gt,Pe([Gt.key(t)],e.map((function(t){return Gt.key(t)})))):t,re)},e}(Re),Ne=function(t){function e(e){return t.call(this,e)||this}return Oe(e,t),e.prototype.get=function(){return this.getValue()},e.prototype.modify=function(t){var e=this.getValue(),n=t(e);re(e,n)||this.next(n)},e.prototype.set=function(t){re(this.getValue(),t)||this.next(t)},e}(De),je=function(t){function e(e,n,r){void 0===r&&(r=re);var i=t.call(this,void 0)||this;return i._source=e,i._lens=n,i._eq=r,i._subscription=null,i._refCount=0,i}return Oe(e,t),e.prototype.get=function(){return this._subscription?this.getValue():this._lens.get(this._source.get())},e.prototype.modify=function(t){var e=this;this._source.modify((function(n){return e._lens.modify(t,n)}))},e.prototype.set=function(t){var e=this;this._source.modify((function(n){return e._lens.set(t,n)}))},e.prototype._onSourceValue=function(t){var e=this.getValue(),n=this._lens.get(t);this._eq(e,n)||this.next(n)},e.prototype._subscribe=function(e){var n=this;this._subscription||(this._subscription=this._source.subscribe((function(t){return n._onSourceValue(t)}))),this._refCount++;var r=new ht((function(){--n._refCount<=0&&n._subscription&&(n._subscription.unsubscribe(),n._subscription=null)}));return r.add(t.prototype._subscribe.call(this,e)),r},e.prototype.unsubscribe=function(){this._subscription&&(this._subscription.unsubscribe(),this._subscription=null),this._refCount=0,t.prototype.unsubscribe.call(this)},e}(De),Le=function(t){function e(e,n,r){void 0===r&&(r=re);var i=t.call(this,void 0)||this;return i._source=e,i._getter=n,i._eq=r,i._subscription=null,i._refCount=0,i}return Oe(e,t),e.prototype.get=function(){return this._subscription?this.getValue():this._getter(this._source.get())},e.prototype._onSourceValue=function(t){var e=this.getValue(),n=this._getter(t);this._eq(e,n)||this.next(n)},e.prototype._subscribe=function(e){var n=this;this._subscription||(this._subscription=this._source.subscribe((function(t){return n._onSourceValue(t)}))),this._refCount++;var r=new ht((function(){--n._refCount<=0&&n._subscription&&(n._subscription.unsubscribe(),n._subscription=null)}));return r.add(t.prototype._subscribe.call(this,e)),r},e.prototype.unsubscribe=function(){this._subscription&&(this._subscription.unsubscribe(),this._subscription=null),this._refCount=0,t.prototype.unsubscribe.call(this)},e}(Re),Fe=function(t){function e(e,n,r){void 0===r&&(r=re);var i=t.call(this,void 0)||this;return i._sources=e,i._combineFn=n,i._eq=r,i._subscription=null,i._refCount=0,i}return Oe(e,t),e.prototype.get=function(){return this._subscription?this.getValue():this._combineFn(this._sources.map((function(t){return t.get()})))},e.prototype._onSourceValues=function(t){var e=this.getValue(),n=this._combineFn(t);this._eq(e,n)||this.next(n)},e.prototype._subscribe=function(e){var n=this;this._subscription||(this._subscription=Ae(this._sources).subscribe((function(t){return n._onSourceValues(t)}))),this._refCount++;var r=new ht((function(){--n._refCount<=0&&n._subscription&&(n._subscription.unsubscribe(),n._subscription=null)}));return r.add(t.prototype._subscribe.call(this,e)),r},e.prototype.unsubscribe=function(){this._subscription&&(this._subscription.unsubscribe(),this._subscription=null),this._refCount=0,t.prototype.unsubscribe.call(this)},e}(Re);!function(t){t.create=function(t){return new Ne(t)},t.log=function(t,e){var n=function(t,e,n){return console.log("%c"+t,"color: "+e+"; font-weight: bold",n)},r=t.get();return t.subscribe((function(t){"function"==typeof e?e(r,t):(console.group("UPDATE "+(e?"TYPE: "+e+" ":"")+"@ "+(new Date).toTimeString()),n("prev state","#9E9E9E",r),n("next state","#4CAF50",t),console.groupEnd()),r=t})),t},t.combine=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Fe(t.slice(void 0,-1),(function(e){return t[t.length-1].apply(t,e)}))},t.fromObservable=function(e){var n,r,i,o=new It(null),s=e.pipe((n=function(e){var n=o.value;null===n?o.next(t.create(e)):n.set(e)},function(t){return t.lift(new kt(n,r,i))}),Mt());return new _t((function(t){var e=new ht;return e.add(o.pipe(Bt((function(t){return!!t}))).subscribe(t)),e.add(s.subscribe(void 0,(function(e){return t.error(e)}),(function(){return t.complete()}))),e}))}}(Ce||(Ce={}));class Ue{constructor(t,e=Ce.create(!1)){this._enableHistoryLoggerInProd=e;const n=t.testArgs,r=n&&n.processEnv?n.processEnv:U.fromBrowserify(),i=M.getTargetEnv(r),o="prod"!==i||"cs"!==t.context,s={create(n){return new Z(n,{writer:new et,filterFn:o?t=>!0:(r=W.ERROR,t=>Y(t.level)>=Y(r))},{...t.historyLoggerExtraArgs,enabledInProd:e});var r}},c=function(t,e,n,r,i){const o=M.create(t,e,n,r,i);return B.init(o),self.GR_CFG=B.get(),o}(t.browser,t.extensionType,t.context,r,i);this.config=c,this.logger=s}static getInstance(){if(void 0===this._instanceShared)throw new Error("Env not inited yet");return this._instanceShared}static initShared(t){if(void 0!==this._instanceShared)throw new Error("Env already inited");this._instanceShared=t}enableHistoryLoggerInProd(){this._enableHistoryLoggerInProd.get()||this._enableHistoryLoggerInProd.set(!0)}}!function(t){t.create=function(t){return new J(t,(()=>Ue.getInstance().logger.create(t)))}}(Ie||(Ie={}));const Me=Ie.create("extension-api");let Be;function $e(t){if(Be)return Be;return Be=t,t}function Ve(){return Be||$e((q()?_(self.extensionBackgroundPageApi,"background page extension api was not initialized"):_(self.extensionContentScriptApi,"content script extension api was not initialized")).message)}const Ge=function(t){const e={},n=t||{};return n.emit=function(t,n){t=r(t);const i=e[t];if(!i)return;const o=i.concat();for(let t=0;t<o.length;t++)o[t](n)},n.emitArgs=function(t){t=r(t);const n=e[t],i=[].slice.call(arguments,1);if(!n)return;const o=n.concat();for(let t=0;t<o.length;t++)o[t].apply(null,i)},n.on=function(t,i){return t=r(t),e[t]=e[t]||[],e[t].push(i),{un:function(){n.un(t,i)}}},n.off=n.un=function(t,n){t=r(t);const i=e[t];if(!i)return;const o=i.indexOf(n);o>-1&&(i.splice(o,1),i.length>0||delete e[t])},n.one=function(t,e){const r=n.on(t,((...t)=>{r.un(),e.apply(null,t)}))},n.delegate=function(t,e,i){e=r(e),n.on(e,(function(n){t.emit(i||e,n)}))},n;function r(t){return"string"!=typeof t?t.join(" "):t}}({}),qe={};function He(t){const e=Ve();"content-script-message-api"===e.kind&&e.onBackgroundPortReconnect&&e.onBackgroundPortReconnect(t)}const We=function(t,e){let n,r,i=!0;function o(t,n=[]){return i&&(i=!1,r=u.createCompletionSource(),setTimeout((()=>{try{r.resolve(e(...n))}catch(t){r.reject(t)}finally{i=!0}}),t)),r.promise}return(...e)=>{const r=n;return n=Date.now(),o(void 0===r||n-r>=t?0:t-(n-r),e)}}(1e3,(t=>Ge.emit("__bgerror",t)));function ze(t){$e(t),self.document&&a(self.document,"grammarly:offline",(()=>We("proxy dead")),void 0)}function Ye(t,e){Ke(t,(function n(...r){Je(t,n),e.apply(this,r)}))}function Ke(t,e){if("__bgerror"===t)return void Ge.on("__bgerror",e);const n=qe[t]=qe[t]||[];if(n.push(e),1===n.length)try{Ve().listen(t,((...t)=>{for(const e of n)e(...t)}))}catch(t){We(t)}}function Je(t,e){if("__bgerror"===t)return void Ge.off("__bgerror",e);const n=qe[t];if(!n)return;const r=n.indexOf(e);-1!==r&&n.splice(r,1),0===n.length&&delete qe[t]}function Xe(t){try{const e=Ve();switch(e.kind){case"background-message-api":e.broadcast(t,{});break;default:throw new Error("emitTabs can be used only on background")}}catch(t){We(t)}}function Qe(t,e,n={},r=g,i=g,o){try{if(!t)throw TypeError("emitTo can't be used without destination point");const s=Ve();switch(s.kind){case"background-message-api":s.sendTo(t,e,n,r,i,o);break;default:throw new Error("emitTo can be used only on background")}}catch(t){We(t)}}function Ze(){const t=Ve();if("background-message-api"===t.kind)return t.topFrameId;throw new Error("topFrameId can only be retreived on background")}function tn(t,e){try{Ve().toFocused(t,e)}catch(t){We(t)}}function en(t,e,n,r){try{const i=Ve();switch(i.kind){case"content-script-message-api":i.broadcastBackground(t,e,n,r);break;default:throw new Error("emitBackground can be used only in content script")}}catch(t){We(t)}}function nn(t,e={},n=1e4){const r=new Promise(((n,r)=>{try{const i=Ve();switch(i.kind){case"content-script-message-api":i.broadcastBackground(t,e,n,r);break;default:throw new Error("promiseBackground can be used only on client scripts")}}catch(t){r(t),We(t)}}));return Promise.race([r,s(n).then((()=>{throw new Error(`Request to bg page (${Be}) rejected by timeout`)}))])}function rn(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new on(t,e))}}var on=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new sn(t,this.project,this.thisArg))},t}(),sn=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.project=n,i.count=0,i.thisArg=r||i,i}return rt(e,t),e.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(bt);function cn(t,e,n,r){return it(n)&&(r=n,n=void 0),r?cn(t,e,n).pipe(rn((function(t){return ut(t)?r.apply(void 0,t):r(t)}))):new _t((function(r){an(t,e,(function(t){arguments.length>1?r.next(Array.prototype.slice.call(arguments)):r.next(t)}),r,n)}))}function an(t,e,n,r,i){var o;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(t)){var s=t;t.addEventListener(e,n,i),o=function(){return s.removeEventListener(e,n,i)}}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(t)){var c=t;t.on(e,n),o=function(){return c.off(e,n)}}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(t)){var a=t;t.addListener(e,n),o=function(){return a.removeListener(e,n)}}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(var u=0,l=t.length;u<l;u++)an(t[u],e,n,r,i)}r.add(o)}var un=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r.pending=!1,r}return rt(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this},e.prototype.requestAsyncId=function(t,e,n){return void 0===n&&(n=0),setInterval(t.flush.bind(t,this),n)},e.prototype.recycleAsyncId=function(t,e,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var n=!1,r=void 0;try{this.work(t)}catch(t){n=!0,r=!!t&&t||new Error(t)}if(n)return this.unsubscribe(),r},e.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},e}(function(t){function e(e,n){return t.call(this)||this}return rt(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(ht)),ln=function(){function t(e,n){void 0===n&&(n=t.now),this.SchedulerAction=e,this.now=n}return t.prototype.schedule=function(t,e,n){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(n,e)},t.now=function(){return Date.now()},t}(),fn=function(t){function e(n,r){void 0===r&&(r=ln.now);var i=t.call(this,n,(function(){return e.delegate&&e.delegate!==i?e.delegate.now():r()}))||this;return i.actions=[],i.active=!1,i.scheduled=void 0,i}return rt(e,t),e.prototype.schedule=function(n,r,i){return void 0===r&&(r=0),e.delegate&&e.delegate!==this?e.delegate.schedule(n,r,i):t.prototype.schedule.call(this,n,r,i)},e.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}},e}(ln),hn=new fn(un);function dn(t,e){var n;return void 0===t&&(t=0),void 0===e&&(e=hn),(ut(n=t)||!(n-parseFloat(n)+1>=0)||t<0)&&(t=0),e&&"function"==typeof e.schedule||(e=hn),new _t((function(n){return n.add(e.schedule(pn,t,{subscriber:n,counter:0,period:t})),n}))}function pn(t){var e=t.subscriber,n=t.counter,r=t.period;e.next(n),this.schedule({subscriber:e,counter:n+1,period:r},r)}var bn=function(){function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t}(),gn=function(){function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t}(),mn=new _t((function(t){return t.complete()}));function vn(t){return t?function(t){return new _t((function(e){return t.schedule((function(){return e.complete()}))}))}(t):mn}function yn(t){return function(e){return 0===t?vn():e.lift(new _n(t))}}var _n=function(){function t(t){if(this.total=t,this.total<0)throw new gn}return t.prototype.call=function(t,e){return e.subscribe(new wn(t,this.total))},t}(),wn=function(t){function e(e,n){var r=t.call(this,e)||this;return r.total=n,r.count=0,r}return rt(e,t),e.prototype._next=function(t){var e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))},e}(bt);function xn(t){return void 0===t&&(t=null),function(e){return e.lift(new En(t))}}var En=function(){function t(t){this.defaultValue=t}return t.prototype.call=function(t,e){return e.subscribe(new Sn(t,this.defaultValue))},t}(),Sn=function(t){function e(e,n){var r=t.call(this,e)||this;return r.defaultValue=n,r.isEmpty=!0,r}return rt(e,t),e.prototype._next=function(t){this.isEmpty=!1,this.destination.next(t)},e.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},e}(bt);function An(t){return void 0===t&&(t=Tn),function(e){return e.lift(new Cn(t))}}var Cn=function(){function t(t){this.errorFactory=t}return t.prototype.call=function(t,e){return e.subscribe(new In(t,this.errorFactory))},t}(),In=function(t){function e(e,n){var r=t.call(this,e)||this;return r.errorFactory=n,r.hasValue=!1,r}return rt(e,t),e.prototype._next=function(t){this.hasValue=!0,this.destination.next(t)},e.prototype._complete=function(){if(this.hasValue)return this.destination.complete();var t=void 0;try{t=this.errorFactory()}catch(e){t=e}this.destination.error(t)},e}(bt);function Tn(){return new bn}var kn=function(){function t(t){this.value=t}return t.prototype.call=function(t,e){return e.subscribe(new On(t,this.value))},t}(),On=function(t){function e(e,n){var r=t.call(this,e)||this;return r.value=n,r}return rt(e,t),e.prototype._next=function(t){this.destination.next(this.value)},e}(bt);function Pn(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[t.length-1];return he(n)?(t.pop(),xe(t,n)):Ee(t)}function Rn(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[mt]}(t))return function(t,e){return new _t((function(n){var r=new ht;return r.add(e.schedule((function(){var i=t[mt]();r.add(i.subscribe({next:function(t){r.add(e.schedule((function(){return n.next(t)})))},error:function(t){r.add(e.schedule((function(){return n.error(t)})))},complete:function(){r.add(e.schedule((function(){return n.complete()})))}}))}))),r}))}(t,e);if(ye(t))return function(t,e){return new _t((function(n){var r=new ht;return r.add(e.schedule((function(){return t.then((function(t){r.add(e.schedule((function(){n.next(t),r.add(e.schedule((function(){return n.complete()})))})))}),(function(t){r.add(e.schedule((function(){return n.error(t)})))}))}))),r}))}(t,e);if(ve(t))return xe(t,e);if(function(t){return t&&"function"==typeof t[me]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new _t((function(n){var r,i=new ht;return i.add((function(){r&&"function"==typeof r.return&&r.return()})),i.add(e.schedule((function(){r=t[me](),i.add(e.schedule((function(){if(!n.closed){var t,e;try{var i=r.next();t=i.value,e=i.done}catch(t){return void n.error(t)}e?n.complete():(n.next(t),this.schedule())}})))}))),i}))}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}function Dn(t,e){return e?Rn(t,e):t instanceof _t?t:new _t(_e(t))}var Nn=function(t){function e(e){var n=t.call(this)||this;return n.parent=e,n}return rt(e,t),e.prototype._next=function(t){this.parent.notifyNext(t)},e.prototype._error=function(t){this.parent.notifyError(t),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},e}(bt),jn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return rt(e,t),e.prototype.notifyNext=function(t){this.destination.next(t)},e.prototype.notifyError=function(t){this.destination.error(t)},e.prototype.notifyComplete=function(){this.destination.complete()},e}(bt);function Ln(t,e){if(!e.closed)return t instanceof _t?t.subscribe(e):_e(t)(e)}function Fn(t,e,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"==typeof e?function(r){return r.pipe(Fn((function(n,r){return Dn(t(n,r)).pipe(rn((function(t,i){return e(n,t,r,i)})))}),n))}:("number"==typeof e&&(n=e),function(e){return e.lift(new Un(t,n))})}var Un=function(){function t(t,e){void 0===e&&(e=Number.POSITIVE_INFINITY),this.project=t,this.concurrent=e}return t.prototype.call=function(t,e){return e.subscribe(new Mn(t,this.project,this.concurrent))},t}(),Mn=function(t){function e(e,n,r){void 0===r&&(r=Number.POSITIVE_INFINITY);var i=t.call(this,e)||this;return i.project=n,i.concurrent=r,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return rt(e,t),e.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},e.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(t){return void this.destination.error(t)}this.active++,this._innerSub(e)},e.prototype._innerSub=function(t){var e=new Nn(this),n=this.destination;n.add(e);var r=Ln(t,e);r!==e&&n.add(r)},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(t){this.destination.next(t)},e.prototype.notifyComplete=function(){var t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(jn);function Bn(t){return void 0===t&&(t=Number.POSITIVE_INFINITY),Fn(vt,t)}function $n(){return Bn(1)}function Vn(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return $n()(Pn.apply(void 0,t))}function Gn(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[t.length-1];return he(n)?(t.pop(),function(e){return Vn(t,e,n)}):function(e){return Vn(t,e)}}function qn(t,e){return function(n){return n.lift(new Hn(t,e))}}var Hn=function(){function t(t,e){this.compare=t,this.keySelector=e}return t.prototype.call=function(t,e){return e.subscribe(new Wn(t,this.compare,this.keySelector))},t}(),Wn=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.keySelector=r,i.hasKey=!1,"function"==typeof n&&(i.compare=n),i}return rt(e,t),e.prototype.compare=function(t,e){return t===e},e.prototype._next=function(t){var e;try{var n=this.keySelector;e=n?n(t):t}catch(t){return this.destination.error(t)}var r=!1;if(this.hasKey)try{r=(0,this.compare)(this.key,e)}catch(t){return this.destination.error(t)}else this.hasKey=!0;r||(this.key=e,this.destination.next(t))},e}(bt);class zn{constructor(){this._storage=this._storage||{}}get _storage(){return self.__CS_SHARE_STORAGE__}set _storage(t){self.__CS_SHARE_STORAGE__=t}clean(){this._storage={}}set(t,e){this._storage[t]=e}get(t){return this._storage[t]}getOnce(t){const e=this._storage[t];return this.remove(t),e}remove(t){delete this._storage[t]}}class Yn{constructor(t,e,n=v.create(),r=t){this._rpcMessageName=t,this._message=e,this._clientId=n,this._inboundMessageName=r,this.inbound=new _t((t=>{const e=e=>{e.clientId===this._clientId&&t.next(e.data)};return this._message.on(this._inboundMessageName,e),()=>this._message.off(this._inboundMessageName,e)})),this.outbound=t=>{this._message.emitBackground(this._rpcMessageName,{clientId:this._clientId,data:t})}}}class Kn extends class{constructor(t,e){this._transport=t,this._log=e,this._calls=new Map,this._sub=this._transport.inbound.subscribe((t=>{var e;const n=this._calls.get(t.id);if(n)try{"err"in t?n.reject(t.err):n.resolve(t.res)}finally{this._calls.delete(t.id)}else null===(e=this._log)||void 0===e||e.warn(`received rpc call response for unregistered call ${t.id}`)})),this.api=new Proxy({},{get:(t,e)=>"then"===e?void 0:(...t)=>this._handleCall(e,t)})}_handleCall(t,e){let n=v.create();for(;this._calls.has(n);)n=v.create();const r=u.createCompletionSource();return this._calls.set(n,r),this._transport.outbound({id:n,method:t,args:e}),r.promise}dispose(){this._sub.unsubscribe()}}{constructor(t){super(new Yn("cs-to-bg-rpc-1557421403805",t))}}function Jn(t){return"tunnel"!==t.tag}var Xn;!function(t){t.isSubscribe=t=>"action"in t.data&&"subscribe"===t.data.action,t.isUnsubscribe=t=>"action"in t.data&&"unsubscribe"===t.data.action,t.isDispose=t=>"action"in t.data&&"dispose"===t.data.action,t.isPong=t=>"pong"in t.data,t.isPing=t=>"ping"in t.data,t.isObservableResult=t=>"subscribableId"in t}(Xn||(Xn={}));const Qn=Symbol();var Zn;function tr(t){return t instanceof _t?t:new _t((e=>t.subscribe(e)))}!function(t){t.measure=t=>e=>new _t((n=>e.subscribe((e=>t((()=>n.next(e)))),(t=>n.error(t)),(()=>n.complete())))),t.using=(t,e)=>function(t,e){return new _t((function(n){var r,i;try{r=t()}catch(t){return void n.error(t)}try{i=e(r)}catch(t){return void n.error(t)}var o=(i?Dn(i):mn).subscribe(n);return function(){o.unsubscribe(),r&&r.unsubscribe()}}))}(t,e),t.doNothing=t=>t}(Zn||(Zn={}));class er{constructor(t,e,n=Ie.create(er.name),r){this._transport=t,this._observableTransport=e,this._log=n,this._serverId=r,this._calls=new Map,this._subscribeRelatedCalls=new Map,this._observables=new Map,this._subscribers=new Map,this._transportSubscription=tr(this._transport.inbound).pipe(Bt(Jn)).subscribe((t=>{this._processResponse(t)})),this._observableTransportSubscription=tr(this._observableTransport.inbound).pipe(Bt(Jn)).subscribe((t=>{this._processObservableMessage(t)})),this.api=new Proxy({},{get:(t,e)=>"then"===e?void 0:(...t)=>this._handleCall(e,t)})}_processResponse(t){const e=this._calls.get(t.id);if(e)try{if("err"in t)e.reject(t.err);else if(Xn.isObservableResult(t))try{const n=new _t((e=>this._createSubscribeHandler(t.subscribableId,e)));this._observables.set(t.subscribableId,n),e.resolve(n)}catch(e){this._observables.delete(t.subscribableId)}else e.resolve(this.transformResult(t.res))}finally{this._calls.delete(t.id)}else this._log.warn(`received rpc call response for unregistered call ${t.id}`)}transformResult(t){return t}_processObservableMessage(t){if("subscribed"in t){const e=this._subscribeRelatedCalls.get(t.id);if(e)try{e.resolve()}finally{this._subscribeRelatedCalls.delete(t.id)}else this._log.warn(`received rpc call subscribed response for unregistered subscribe call ${t.id}`)}else if("unsubscribed"in t){const e=this._subscribeRelatedCalls.get(t.id);if(e)try{e.resolve()}finally{this._subscribeRelatedCalls.delete(t.id),this._subscribers.delete(t.id)}else this._log.warn(`received rpc call unsubscribed response for unregistered unsubscribe call ${t.id}`)}else if("next"in t)try{const e=this._subscribers.get(t.subscriptionId);e?e.subscriber.next(t.next):this._log.warn(`received observable next message for unregistered subscription ${t.subscriptionId}`)}catch(e){this._subscribers.delete(t.subscriptionId)}else if("complete"in t)try{const e=this._subscribers.get(t.subscriptionId);e?(e.subscriber.complete(),this._subscribers.delete(t.subscriptionId)):this._log.warn(`received observable complete for unregistered subscription ${t.subscriptionId}`)}catch(e){this._subscribers.delete(t.subscriptionId)}else if("err"in t)try{const e=this._subscribers.get(t.subscriptionId);e?e.subscriber.error(t.err):this._log.warn(`received observable error for unregistered subscription  ${t.subscriptionId}`)}finally{this._subscribers.delete(t.subscriptionId)}else if("subErr"in t){const e=this._subscribeRelatedCalls.get(t.id);try{const n=this._subscribers.get(t.id);n?n.subscriber.error(t.subErr):this._log.warn(`received subscription error response for unregistered call ${t.id}`)}finally{e&&(e.reject(t.subErr),this._subscribeRelatedCalls.delete(t.id)),this._observables.delete(t.subscribableId),this._subscribers.delete(t.id)}}else if("ping"in t)try{this._observables.get(t.ping)?this._observableTransport.outbound({pong:t.ping}):this._log.warn(`received ping for unregistered observable ${t.ping}`)}finally{}}_handleCall(t,e){let n=v.create();for(;this._calls.has(n);)n=v.create();const r=u.createCompletionSource();this._calls.set(n,r);const i=e.map((t=>{return e=t,Boolean(e)&&e._tag===Qn?t.toJSON():t;var e}));return this._transport.outbound({id:n,method:t,args:i,serverId:this._serverId}),r.promise}_createSubscribeHandler(t,e){let n=v.create();for(;this._subscribeRelatedCalls.has(n);)n=v.create();const r=u.createCompletionSource();return this._subscribeRelatedCalls.set(n,r),this._observableTransport.outbound({id:n,subscribableId:t,action:"subscribe"}),this._subscribers.set(n,{subscribableId:t,subscriber:e}),()=>{this._handleUnsubscribe(n,t)}}_handleUnsubscribe(t,e){let n=v.create();for(;this._subscribeRelatedCalls.has(n);)n=v.create();const r=u.createCompletionSource();return this._subscribeRelatedCalls.set(n,r),this._observableTransport.outbound({id:n,subscriptionId:t,subscribableId:e,action:"unsubscribe"}),this._subscribers.delete(t),r.promise}dispose(){for(const t of this._observables.keys())this._observableTransport.outbound({id:v.create(),subscribableId:t,action:"dispose"});this._observables.clear(),this._transportSubscription.unsubscribe(),this._observableTransportSubscription.unsubscribe(),this._calls.clear(),this._subscribeRelatedCalls.clear()}}class nr extends er{constructor(t){super(new Yn("cs-to-bg-rpc-1587687052565",t),new Yn("cs-to-bg-observable-rpc-1587687052565",t))}}class rr extends Ue{constructor(e){var n;super({browser:e.browser,extensionType:e.extensionType,context:"cs",historyLoggerExtraArgs:{downloadFileName:"grammarly-cs-logs.tsv",onDownload:()=>{var t;null===(t=this.bgRpc)||void 0===t||t.api.downloadBackgroundPageLogs()}}}),this.browserApi=e.browserApi,ze(e.browserApi.message),e.skipInitExtensionApi||(n=e.browserApi,self.extensionContentScriptApi&&Me.warn("Content Script Extension Api init called more than once"),self.extensionContentScriptApi=self.extensionContentScriptApi||n),this.bgRpc=new Kn(t),this.csShareStorage=new zn,this.capiBgRpc=new nr(t)}static getInstance(){if(void 0===this._instance)throw new Error("Env not inited yet");return this._instance}static init(t){if(void 0!==this._instance)throw new Error("Env already inited");const e=new rr(t);return this._instance=e,Ue.initShared(e),e.browserApi.message.start&&e.browserApi.message.start(),e}}const ir=2147483642;var or;!function(t){function e(t,e){try{for(const n of Object.keys(e))if(e[n]&&e[n](t))return n;return null}catch(t){return null}}t.isSpecific={draftJs:t=>!(!t.hasAttribute("contenteditable")||!t.querySelector('[data-contents="true"] > [data-editor], [data-block]')),quill:t=>t.classList.contains("ql-editor")||t.classList.contains("ql-container"),redactor:t=>t.className.indexOf("redactor")>-1,prosemirror:t=>t.hasAttribute("pm-container")||t.classList.contains("ProseMirror"),scribe:t=>t.className.indexOf("scribe")>-1,trix:t=>t.className.indexOf("trix")>-1,"medium-editor":t=>t.className.indexOf("medium-editor")>-1,tinymce:t=>{if("IFRAME"!==t.tagName)return!1;const e=t;return e.id.indexOf("mce")>-1||!!(e.contentDocument&&e.contentDocument.querySelectorAll("#tinymce, .mce-content-body").length>0)},ckeditor4:t=>t.matches("iframe.cke_wysiwyg_frame")||t.classList.contains("cke_editable"),ckeditor5:t=>t.classList.contains("ck-editor__editable"),slate:t=>"true"===t.getAttribute("data-slate-editor"),mobiledoc:t=>t.classList.contains("__mobiledoc-editor")},t.isGeneric={contenteditable:t=>{const e=t.attributes.getNamedItem("contenteditable");return!(!function(t){return!(t instanceof HTMLSelectElement)}(t)||!e||"true"!==e.value&&""!==e.value&&"plaintext-only"!==e.value)},textarea:t=>"TEXTAREA"===t.tagName,iframe:e=>{if("IFRAME"===e.tagName){const n=e;return!!(n.contentDocument&&n.contentDocument.body&&t.isGeneric.contenteditable(n.contentDocument.body))}return!1},iframeHost:e=>{if("IFRAME"===e.tagName){const n=e;return!(n.contentDocument&&n.contentDocument.body&&t.isGeneric.contenteditable(n.contentDocument.body))}return!1}},t.get=function(n){return{generic:e(n,t.isGeneric),specific:e(n,t.isSpecific)}}}(or||(or={}));var sr=1,cr=function(){return Promise.resolve()}(),ar={};function ur(t){return t in ar&&(delete ar[t],!0)}var lr,fr=function(t){var e=sr++;return ar[e]=!0,cr.then((function(){return ur(e)&&t()})),e},hr=function(t){ur(t)},dr=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r}return rt(e,t),e.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),null!==r&&r>0?t.prototype.requestAsyncId.call(this,e,n,r):(e.actions.push(this),e.scheduled||(e.scheduled=fr(e.flush.bind(e,null))))},e.prototype.recycleAsyncId=function(e,n,r){if(void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0)return t.prototype.recycleAsyncId.call(this,e,n,r);0===e.actions.length&&(hr(n),e.scheduled=void 0)},e}(un),pr=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return rt(e,t),e.prototype.flush=function(t){this.active=!0,this.scheduled=void 0;var e,n=this.actions,r=-1,i=n.length;t=t||n.shift();do{if(e=t.execute(t.state,t.delay))break}while(++r<i&&(t=n.shift()));if(this.active=!1,e){for(;++r<i&&(t=n.shift());)t.unsubscribe();throw e}},e}(fn))(dr);function br(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Number.POSITIVE_INFINITY,r=null,i=t[t.length-1];return he(i)?(r=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(n=t.pop())):"number"==typeof i&&(n=t.pop()),null===r&&1===t.length&&t[0]instanceof _t?t[0]:Bn(n)(Ee(t,r))}function gr(t,e,n){return n?gr(t,e).pipe(rn((function(t){return ut(t)?n.apply(void 0,t):n(t)}))):new _t((function(n){var r,i=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return n.next(1===t.length?t[0]:t)};try{r=t(i)}catch(t){return void n.error(t)}if(it(e))return function(){return e(i,r)}}))}function mr(t){var e=t.error;t.subscriber.error(e)}lr||(lr={});var vr=function(){function t(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}return t.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},t.prototype.do=function(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}},t.prototype.accept=function(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)},t.prototype.toObservable=function(){var t,e;switch(this.kind){case"N":return Pn(this.value);case"E":return t=this.error,new _t(e?function(n){return e.schedule(mr,0,{error:t,subscriber:n})}:function(e){return e.error(t)});case"C":return vn()}throw new Error("unexpected notification kind value")},t.createNext=function(e){return void 0!==e?new t("N",e):t.undefinedValueNotification},t.createError=function(e){return new t("E",void 0,e)},t.createComplete=function(){return t.completeNotification},t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t}();function yr(t,e){return void 0===e&&(e=0),function(n){return n.lift(new _r(t,e))}}var _r=function(){function t(t,e){void 0===e&&(e=0),this.scheduler=t,this.delay=e}return t.prototype.call=function(t,e){return e.subscribe(new wr(t,this.scheduler,this.delay))},t}(),wr=function(t){function e(e,n,r){void 0===r&&(r=0);var i=t.call(this,e)||this;return i.scheduler=n,i.delay=r,i}return rt(e,t),e.dispatch=function(t){var e=t.notification,n=t.destination;e.observe(n),this.unsubscribe()},e.prototype.scheduleMessage=function(t){this.destination.add(this.scheduler.schedule(e.dispatch,this.delay,new xr(t,this.destination)))},e.prototype._next=function(t){this.scheduleMessage(vr.createNext(t))},e.prototype._error=function(t){this.scheduleMessage(vr.createError(t)),this.unsubscribe()},e.prototype._complete=function(){this.scheduleMessage(vr.createComplete()),this.unsubscribe()},e}(bt),xr=function(){return function(t,e){this.notification=t,this.destination=e}}();function Er(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return e.lift.call(Vn.apply(void 0,[e].concat(t)))}}function Sr(t,e){return Fn(t,e,1)}const Ar=1e3;var Cr;!function(t){const e=Ie.create("universal.cs.integration.observables"),n=t=>cn(t,"focus",!0);function r(t,e){return{document:t,frame:e}}t.createFocusObservable=function(t,i,o=n){return function(t,n){const i=r(t),o=Dn(t.getElementsByTagName("iframe")),s=n.pipe(Sr((t=>Array.from(t.addedNodes))),Bt((t=>"IFRAME"===t.nodeName)));return o.pipe(Er(s),Bt((n=>function(t,n){try{const e=t.src;if(e&&"about:blank"!==e&&!e.startsWith("javascript")){return new URL(e,n.baseURI).origin===n.location.origin}return!0}catch(t){return e.warn("Error converting iframe's src to url",t),!0}}(n,t))),Fn((t=>{try{return function(t){const e=t.contentDocument;return e&&"complete"===e.readyState}(t)?Pn(t):gr((e=>t.addEventListener("load",e,!0)),(e=>t.removeEventListener("load",e)),(()=>t)).pipe(yn(1))}catch(t){return e.warn("failed to receive iframes document",t),Pn(null)}})),rn((t=>{try{if(null!==t&&null!==t.contentDocument)return r(t.contentDocument,t)}catch(t){e.warn("failed to receive iframes document",t)}return null})),Bt((t=>null!==t))).pipe(Gn(i))}(t,i).pipe(Fn((t=>function(t,e,n){const r=t.document,i=dn(Ar),o=t.frame?vn():(u=()=>Pn(r.activeElement).pipe(Bt((t=>t&&r.defaultView&&r.defaultView.HTMLElement&&t instanceof r.defaultView.HTMLElement))),new _t((function(t){var e;try{e=u()}catch(e){return void t.error(e)}return(e?Dn(e):vn()).subscribe(t)}))),s=e(r).pipe(rn((t=>t.target))),c=t.frame?vn():br(i,n).pipe(Bt((t=>!!r.defaultView&&"visible"===r.visibilityState&&!!r.activeElement)),rn((t=>r.activeElement)),qn()),a=br(c,s).pipe(Bt((t=>r.defaultView&&r.defaultView.HTMLElement&&t instanceof r.defaultView.HTMLElement)),rn((t=>t)));var u;return o.pipe(Er(a),qn())}(t,o,i).pipe(rn((e=>({element:e,owner:t})))))),qn(),yr(pr))},t.docInfo=r}(Cr||(Cr={}));const Ir=t=>t.replace("www.","");function Tr(t){const e=t&&t.ownerDocument||document,n=e.location||e.defaultView.location;return n?Ir(n.hostname):""}function kr(t){return"firefox"===V().bundleInfo.browser&&/^about:/.test(t)?t:""===t?"":Ir(new URL(t).hostname)}var Or;!function(t){function e(t,e){if(!t||!e)return!0;return!e.includes(t)}function n(t,e){var n;return Boolean((null==e?void 0:e.isDesktopIntegrationEnabled)&&(null===(n=t.llamaIntegration)||void 0===n?void 0:n.enabled))}function r(t,n,r,i){var o,s;const c=i?kr(i):void 0,a=t.isLlamaInstalled&&(null===(o=n.llamaIntegration)||void 0===o?void 0:o.enabled);return e(c,null===(s=n.llamaIntegration)||void 0===s?void 0:s.disabledByDomain)&&(a||t.showDesktopIntegrationExtensionToggle||(null==r?void 0:r.desktopIntegrationExtensionSupport))}t.isEnable=n,t.showSettingPopupToggle=r,t.showGrayGButton=function(t,e,i,o){return r(t,e,i,o)&&n(e,t)},t.isIntegrationEnable=function(t,r,i){var o;return!(!t||!i)&&(e(r,null===(o=i.llamaIntegration)||void 0===o?void 0:o.disabledByDomain)&&n(i,t))}}(Or||(Or={}));const Pr="grammarly-desktop-integration";var Rr,Dr;!function(t){let e;!function(t){t.full="full",t.limited="limited"}(e=t.Mode||(t.Mode={}));class n{constructor(){this._integration=null;document.querySelector(Pr)||(this._integration=function(t=Pr){var e,n;const r=document.createElement("style");r.textContent="\n  div {\n    position: absolute;\n    width: 1px;\n    height: 1px;\n    padding: 0;\n    margin: -1px;\n    overflow: hidden;\n    clip: rect(0, 0, 0, 0);\n    white-space: nowrap;\n    border: 0;\n    -moz-user-select: none;\n    -webkit-user-select: none;\n    -ms-user-select:none;\n    user-select:none;\n  }\n\n  div:before {\n    content: attr(data-content);\n  }\n";const i=document.createElement("div");i.setAttribute("aria-label","grammarly-integration"),i.setAttribute("tabindex","-1");const o=document.createElement(t);return o.attachShadow({mode:"open"}),o.setAttribute("data-grammarly-shadow-root","true"),null===(e=o.shadowRoot)||void 0===e||e.appendChild(r),null===(n=o.shadowRoot)||void 0===n||n.appendChild(i),document.documentElement.appendChild(o),{activate:(t,e)=>{const n=JSON.stringify(e?{mode:e,isActive:t}:{isActive:t});null==i||i.setAttribute("data-content",n)},remove:()=>{var t;null===(t=null==o?void 0:o.parentNode)||void 0===t||t.removeChild(o)}}}(Pr))}updateState(t,n,r){var i;const o=!Or.isIntegrationEnable(r,t,n),s=Or.isEnable(n,r)?e.limited:e.full;null===(i=this._integration)||void 0===i||i.activate(o,s)}dispose(){var t;null===(t=this._integration)||void 0===t||t.remove()}}t.init=function(){return new n}}(Rr||(Rr={})),function(t){function e(t,e){return n(t,e).pipe(Mt(),yr(pr))}function n(t,e){return new _t((n=>{const r=new MutationObserver((t=>n.next(t)));return r.observe(t,e),()=>r.disconnect()}))}t.create=e,t.createUnsafe=n,t.createFlattenHot=function(t,e){return n(t,e).pipe(Sr((t=>t)),Mt())},t.observeAttribute=function(t,n){return e(t,{attributes:!0,attributeFilter:[n],subtree:!1,childList:!1}).pipe(rn((e=>t.getAttribute(n))))},t.observeStyle=function(t){return e(t,{attributes:!0,attributeFilter:["style"],subtree:!1,childList:!1}).pipe(rn((e=>t.style)))},t.observeChildList=function(t){return e(t,{attributes:!1,subtree:!1,childList:!0}).pipe(rn((e=>t.childNodes)))}}(Dr||(Dr={}));var Nr=n(52961);const jr="data-enable-grammarly";const Lr=["data-gramm_editor","data-gramm","data-gramm_id","gramm_editor","readonly","disabled"],Fr=["pm-container",{name:"class",value:"ProseMirror"},"data-synchrony",{name:"data-gramm",value:"false"},{name:jr,value:"false"},{name:"aria-label",value:"Search Facebook"}],Ur=["changed-user","changed-plan","changed-dialect","cleanup","editor-fix","llama-action"];function Mr(t,e){let n=t.parentNode;for(;null!==n;){if($r(n,e))return n;n=n.parentNode}return!1}function Br(t){return"true"===t.contentEditable||"plaintext-only"===t.contentEditable}function $r(t,e){if(!t)return!1;const n=t.matches||t.msMatchesSelector||t.matchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector;return!!n&&n.apply(t,[e])}function Vr(t,e=null,n){return this.addEventListener(t,e,n),{off:()=>Gr.apply(this,[t,e,n])}}function Gr(t,e,n){this.removeEventListener(t,e||null,n)}const qr=Ie.create("lib.external");function Hr(t){const e=document.createElement("script");e.innerHTML=t,document.head.appendChild(e),e.parentNode&&e.parentNode.removeChild(e)}function Wr(){Hr(`window.GR_EXTENSION_ID='${V().appConfig.extensionId}'`),Hr("\n    window.GR_EXTENSION_SEND = function(key, data) {\n      if (!key) throw new TypeError('cant be called without message')\n      var e = document.createEvent('CustomEvent')\n      e.initCustomEvent('external:' + key, true, true, data)\n      document.dispatchEvent(e)\n    }\n  ");const t=Ur.map((t=>{const e=`external:${t}`;return Vr.call(document,e,(({detail:t})=>{qr.trace("external event",{event:e,detail:t}),en(e,t)}))}));return{dispose:()=>{Hr("\n        delete window.GR_EXTENSION_ID\n        delete window.GR_EXTENSION_SEND\n      "),t.forEach((t=>t.off()))}}}function zr(t,e){const n=t.anchorNode;if(!n)return!1;const r=Lr.map((t=>Array.isArray(t)?`[${t[0]}="${t[1]}"]`:`[${t}]`)).join(","),i=e.activeElement,o=t.toString().trim(),s="TEXTAREA"!==n.tagName&&"INPUT"!==n.tagName,c=!i||"INPUT"!==i.tagName&&"TEXTAREA"!==i.tagName,a=!Br(n),u=!Mr(n,r)&&!$r(n,r),l=!Mr(n,"[contenteditable=true],[contenteditable=plaintext-only]")&&!function(t){let e=t.parentNode;for(;null!==e;){if(Br(e))return e;e=e.parentNode}return!1}(n);return!!(o&&s&&c&&a&&u&&l)}function Yr(t,e){return"function"==typeof e?function(n){return n.pipe(Yr((function(n,r){return Dn(t(n,r)).pipe(rn((function(t,i){return e(n,t,r,i)})))})))}:function(e){return e.lift(new Xr(t))}}var Kr,Jr,Xr=function(){function t(t){this.project=t}return t.prototype.call=function(t,e){return e.subscribe(new Qr(t,this.project))},t}(),Qr=function(t){function e(e,n){var r=t.call(this,e)||this;return r.project=n,r.index=0,r}return rt(e,t),e.prototype._next=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(t){return void this.destination.error(t)}this._innerSub(e)},e.prototype._innerSub=function(t){var e=this.innerSubscription;e&&e.unsubscribe();var n=new Nn(this),r=this.destination;r.add(n),this.innerSubscription=Ln(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)},e.prototype._complete=function(){var e=this.innerSubscription;e&&!e.closed||t.prototype._complete.call(this),this.unsubscribe()},e.prototype._unsubscribe=function(){this.innerSubscription=void 0},e.prototype.notifyComplete=function(){this.innerSubscription=void 0,this.isStopped&&t.prototype._complete.call(this)},e.prototype.notifyNext=function(t){this.destination.next(t)},e}(jn);!function(t){t.anonymous="anonymous",t.registered="registered",t.premium="premium"}(Kr||(Kr={})),function(t){function e(t){return!!t.institutionInfo}t.getType=function(t){return t.premium?Kr.premium:t.anonymous?Kr.anonymous:Kr.registered},t.getUserRole=function(t,e){var n;return null===(n=t.roles)||void 0===n?void 0:n.find((t=>t.type===e))},t.isEdcBlocked=function(t){return!!t.edc&&!t.edc.compliant},t.hasRole=function(t){return!!t.customFields&&(void 0!==t.customFields.frontend_role&&""!==t.customFields.frontend_role)},t.hasSoundFluentGoals=function(t){return!!t.customFields&&(void 0!==t.customFields.frontend_soundFluent&&""!==t.customFields.frontend_soundFluent)},t.hasPrimaryLanguage=function(t){return!!t.customFields&&(void 0!==t.customFields.frontend_primaryLanguage&&""!==t.customFields.frontend_primaryLanguage)},t.isBusinessAdmin=function(t){var e,n;const r=(null===(e=null==t?void 0:t.institutionInfo)||void 0===e?void 0:e.organizationType)||"";return Boolean(["BUSINESS","NGO","GOV"].includes(r)&&(null===(n=null==t?void 0:t.institutionInfo)||void 0===n?void 0:n.admin))},t.doesUserBelongToInstitution=function(t){return!!(null==t?void 0:t.institutionInfo)},t.doesUserBelongToEDUInstitution=function(t){var e;return["EDU"].includes((null===(e=null==t?void 0:t.institutionInfo)||void 0===e?void 0:e.organizationType)||"")},t.doesUserBelongToWorkspace=function(t){var e;return(null===(e=t.roles)||void 0===e?void 0:e.map((t=>t.type)).includes("WORKSPACE"))||!1},t.isClaimed=function(t){return t.groups.includes("claimed-invitation")},t.isGrammarlyEmployee=function(t){return t.email.endsWith("@grammarly.com")},t.isInstitutionUser=e,t.isConsumerUser=function(t){return!e(t)},t.defaultUser={anonymous:!0,groups:[],mimic:[],id:"id",premium:!1,isTest:!1,settings:{},subscriptionFree:!1,type:"anonymous",email:"",registrationDate:(new Date).toString(),firstName:""}}(Jr||(Jr={}));var Zr=function(t){return"Left"===t._tag},ti=function(t){return{_tag:"Left",left:t}},ei=function(t){return{_tag:"Right",right:t}};function ni(t,e){const n=t.decode(e);if(Zr(n))throw new Error("Can't parse "+n.left.map((t=>t.message)).join("; "));return n.right}var ri=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ii=function(){return(ii=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},oi=ti,si=function(t,e,n){return oi([{value:t,context:e,message:n}])},ci=ei,ai=function(){function t(t,e,n,r){this.name=t,this.is=e,this.validate=n,this.encode=r,this.decode=this.decode.bind(this)}return t.prototype.pipe=function(e,n){var r=this;return void 0===n&&(n="pipe("+this.name+", "+e.name+")"),new t(n,e.is,(function(t,n){var i=r.validate(t,n);return Zr(i)?i:e.validate(i.right,n)}),this.encode===ui&&e.encode===ui?ui:function(t){return r.encode(e.encode(t))})},t.prototype.asDecoder=function(){return this},t.prototype.asEncoder=function(){return this},t.prototype.decode=function(t){return this.validate(t,[{key:"",type:this,actual:t}])},t}(),ui=function(t){return t};function li(t,e,n,r){for(var i=t.length,o=Array(i+1),s=0;s<i;s++)o[s]=t[s];return o[i]={key:e,type:n,actual:r},o}function fi(t,e){for(var n=e.length,r=0;r<n;r++)t.push(e[r])}var hi=Object.prototype.hasOwnProperty;function di(t){return Object.keys(t).map((function(e){return e+": "+t[e].name})).join(", ")}function pi(t){for(var e=0;e<t.length;e++)if(t[e].encode!==ui)return!1;return!0}function bi(t){return"{ "+di(t)+" }"}function gi(t){return"Partial<"+t+">"}function mi(t){return"("+t.map((function(t){return t.name})).join(" | ")+")"}function vi(t,e){for(var n=!0,r=!0,i=!Ni.is(t),o=0,s=e;o<s.length;o++){(l=s[o])!==t&&(n=!1),Ni.is(l)&&(r=!1)}if(n)return t;if(r)return e[e.length-1];for(var c={},a=0,u=e;a<u.length;a++){var l=u[a];for(var f in l)c.hasOwnProperty(f)&&!i&&l[f]===t[f]||(c[f]=l[f])}return c}function yi(t){switch(t._tag){case"RefinementType":case"ReadonlyType":return yi(t.type);case"InterfaceType":case"StrictType":case"PartialType":return t.props;case"IntersectionType":return t.types.reduce((function(t,e){return Object.assign(t,yi(e))}),{})}}function _i(t,e){for(var n=Object.getOwnPropertyNames(t),r=!1,i={},o=0;o<n.length;o++){var s=n[o];hi.call(e,s)?i[s]=t[s]:r=!0}return r?i:t}var wi={};function xi(t,e){for(var n=[],r=0,i=t;r<i.length;r++){var o=i[r];-1!==e.indexOf(o)&&n.push(o)}return n}function Ei(t){return"LiteralType"===t._tag}function Si(t){return"InterfaceType"===t._tag}function Ai(t){return"UnionType"===t._tag}var Ci=[];function Ii(t){if(-1!==Ci.indexOf(t))return wi;if(Si(t)||function(t){return"StrictType"===t._tag}(t)){var e=wi;for(var n in t.props){var r=t.props[n];Ei(r)&&(e===wi&&(e={}),e[n]=[r.value])}return e}if(function(t){return"ExactType"===t._tag}(t)||function(t){return"RefinementType"===t._tag}(t))return Ii(t.type);if(function(t){return"IntersectionType"===t._tag}(t))return t.types.reduce((function(t,e){return function(t,e){if(t===wi)return e;if(e===wi)return t;var n=Object.assign({},t);for(var r in e)if(t.hasOwnProperty(r)){var i=xi(t[r],e[r]);if(!(i.length>0)){n=wi;break}n[r]=i}else n[r]=e[r];return n}(t,Ii(e))}),wi);if(Ai(t))return t.types.slice(1).reduce((function(t,e){return function(t,e){if(t===wi||e===wi)return wi;var n=wi;for(var r in t)e.hasOwnProperty(r)&&0===xi(t[r],e[r]).length&&(n===wi&&(n={}),n[r]=t[r].concat(e[r]));return n}(t,Ii(e))}),Ii(t.types[0]));if(function(t){return"RecursiveType"===t._tag}(t)){Ci.push(t);var i=Ii(t.type);return Ci.pop(),i}return wi}var Ti=new(function(t){function e(){var e=t.call(this,"null",(function(t){return null===t}),(function(t,n){return e.is(t)?ci(t):si(t,n)}),ui)||this;return e._tag="NullType",e}return ri(e,t),e}(ai)),ki=new(function(t){function e(){var e=t.call(this,"undefined",(function(t){return void 0===t}),(function(t,n){return e.is(t)?ci(t):si(t,n)}),ui)||this;return e._tag="UndefinedType",e}return ri(e,t),e}(ai)),Oi=(new(function(t){function e(){var e=t.call(this,"void",ki.is,ki.validate,ui)||this;return e._tag="VoidType",e}return ri(e,t),e}(ai)),new(function(t){function e(){var e=t.call(this,"unknown",(function(t){return!0}),ci,ui)||this;return e._tag="UnknownType",e}return ri(e,t),e}(ai)),new(function(t){function e(){var e=t.call(this,"string",(function(t){return"string"==typeof t}),(function(t,n){return e.is(t)?ci(t):si(t,n)}),ui)||this;return e._tag="StringType",e}return ri(e,t),e}(ai))),Pi=new(function(t){function e(){var e=t.call(this,"number",(function(t){return"number"==typeof t}),(function(t,n){return e.is(t)?ci(t):si(t,n)}),ui)||this;return e._tag="NumberType",e}return ri(e,t),e}(ai)),Ri=(new(function(t){function e(){var e=t.call(this,"bigint",(function(t){return"bigint"==typeof t}),(function(t,n){return e.is(t)?ci(t):si(t,n)}),ui)||this;return e._tag="BigIntType",e}return ri(e,t),e}(ai)),new(function(t){function e(){var e=t.call(this,"boolean",(function(t){return"boolean"==typeof t}),(function(t,n){return e.is(t)?ci(t):si(t,n)}),ui)||this;return e._tag="BooleanType",e}return ri(e,t),e}(ai))),Di=new(function(t){function e(){var e=t.call(this,"UnknownArray",Array.isArray,(function(t,n){return e.is(t)?ci(t):si(t,n)}),ui)||this;return e._tag="AnyArrayType",e}return ri(e,t),e}(ai)),Ni=new(function(t){function e(){var e=t.call(this,"UnknownRecord",(function(t){var e=Object.prototype.toString.call(t);return"[object Object]"===e||"[object Window]"===e}),(function(t,n){return e.is(t)?ci(t):si(t,n)}),ui)||this;return e._tag="AnyDictionaryType",e}return ri(e,t),e}(ai));!function(t){function e(e,n,r,i,o){var s=t.call(this,e,n,r,i)||this;return s.value=o,s._tag="LiteralType",s}ri(e,t)}(ai);!function(t){function e(e,n,r,i,o){var s=t.call(this,e,n,r,i)||this;return s.keys=o,s._tag="KeyofType",s}ri(e,t)}(ai);var ji=function(t){function e(e,n,r,i,o,s){var c=t.call(this,e,n,r,i)||this;return c.type=o,c.predicate=s,c._tag="RefinementType",c}return ri(e,t),e}(ai);to(Pi,(function(t){return Number.isInteger(t)}),"Int");var Li=function(t){function e(e,n,r,i,o){var s=t.call(this,e,n,r,i)||this;return s.runDefinition=o,s._tag="RecursiveType",s}return ri(e,t),e}(ai);Object.defineProperty(Li.prototype,"type",{get:function(){return this.runDefinition()},enumerable:!0,configurable:!0});var Fi=function(t){function e(e,n,r,i,o){var s=t.call(this,e,n,r,i)||this;return s.type=o,s._tag="ArrayType",s}return ri(e,t),e}(ai);function Ui(t,e){return void 0===e&&(e="Array<"+t.name+">"),new Fi(e,(function(e){return Di.is(e)&&e.every(t.is)}),(function(e,n){var r=Di.validate(e,n);if(Zr(r))return r;for(var i=r.right,o=i.length,s=i,c=[],a=0;a<o;a++){var u=i[a],l=t.validate(u,li(n,String(a),t,u));if(Zr(l))fi(c,l.left);else{var f=l.right;f!==u&&(s===i&&(s=i.slice()),s[a]=f)}}return c.length>0?oi(c):ci(s)}),t.encode===ui?ui:function(e){return e.map(t.encode)},t)}var Mi=function(t){function e(e,n,r,i,o){var s=t.call(this,e,n,r,i)||this;return s.props=o,s._tag="InterfaceType",s}return ri(e,t),e}(ai);function Bi(t,e){void 0===e&&(e=bi(t));var n=Object.keys(t),r=n.map((function(e){return t[e]})),i=n.length;return new Mi(e,(function(t){if(Ni.is(t)){for(var e=0;e<i;e++){var o=n[e],s=t[o];if(void 0===s&&!hi.call(t,o)||!r[e].is(s))return!1}return!0}return!1}),(function(t,e){var o=Ni.validate(t,e);if(Zr(o))return o;for(var s=o.right,c=s,a=[],u=0;u<i;u++){var l=n[u],f=c[l],h=r[u],d=h.validate(f,li(e,l,h,f));if(Zr(d))fi(a,d.left);else{var p=d.right;(p!==f||void 0===p&&!hi.call(c,l))&&(c===s&&(c=ii({},s)),c[l]=p)}}return a.length>0?oi(a):ci(c)}),pi(r)?ui:function(t){for(var e=ii({},t),o=0;o<i;o++){var s=n[o],c=r[o].encode;c!==ui&&(e[s]=c(t[s]))}return e},t)}var $i=function(t){function e(e,n,r,i,o){var s=t.call(this,e,n,r,i)||this;return s.props=o,s._tag="PartialType",s}return ri(e,t),e}(ai);function Vi(t,e){void 0===e&&(e=gi(bi(t)));var n=Object.keys(t),r=n.map((function(e){return t[e]})),i=n.length;return new $i(e,(function(e){if(Ni.is(e)){for(var r=0;r<i;r++){var o=n[r],s=e[o];if(void 0!==s&&!t[o].is(s))return!1}return!0}return!1}),(function(e,r){var o=Ni.validate(e,r);if(Zr(o))return o;for(var s=o.right,c=s,a=[],u=0;u<i;u++){var l=n[u],f=c[l],h=t[l],d=h.validate(f,li(r,l,h,f));if(Zr(d))void 0!==f&&fi(a,d.left);else{var p=d.right;p!==f&&(c===s&&(c=ii({},s)),c[l]=p)}}return a.length>0?oi(a):ci(c)}),pi(r)?ui:function(t){for(var e=ii({},t),o=0;o<i;o++){var s=n[o],c=t[s];void 0!==c&&(e[s]=r[o].encode(c))}return e},t)}!function(t){function e(e,n,r,i,o,s){var c=t.call(this,e,n,r,i)||this;return c.domain=o,c.codomain=s,c._tag="DictionaryType",c}ri(e,t)}(ai);var Gi=function(t){function e(e,n,r,i,o){var s=t.call(this,e,n,r,i)||this;return s.types=o,s._tag="UnionType",s}return ri(e,t),e}(ai);function qi(t,e){void 0===e&&(e=mi(t));var n=function(t){var e=Ii(t[0]),n=Object.keys(e),r=t.length,i=function(n){for(var i=e[n].slice(),o=[e[n]],s=1;s<r;s++){var c=Ii(t[s])[n];if(void 0===c)return"continue-keys";if(c.some((function(t){return-1!==i.indexOf(t)})))return"continue-keys";i.push.apply(i,c),o.push(c)}return{value:[n,o]}};t:for(var o=0,s=n;o<s.length;o++){var c=i(s[o]);if("object"==typeof c)return c.value;switch(c){case"continue-keys":continue t}}}(t);if(void 0!==n&&t.length>0){var r=n[0],i=n[1],o=i.length,s=function(t){for(var e=0;e<o;e++)if(-1!==i[e].indexOf(t))return e};return new Zi(e,(function(e){if(Ni.is(e)){var n=s(e[r]);return void 0!==n&&t[n].is(e)}return!1}),(function(e,n){var i=Ni.validate(e,n);if(Zr(i))return i;var o=i.right,c=s(o[r]);if(void 0===c)return si(e,n);var a=t[c];return a.validate(o,li(n,String(c),a,o))}),pi(t)?ui:function(n){var i=s(n[r]);if(void 0===i)throw new Error("no codec found to encode value in union codec "+e);return t[i].encode(n)},t,r)}return new Gi(e,(function(e){return t.some((function(t){return t.is(e)}))}),(function(e,n){for(var r=[],i=0;i<t.length;i++){var o=t[i],s=o.validate(e,li(n,String(i),o,e));if(!Zr(s))return ci(s.right);fi(r,s.left)}return oi(r)}),pi(t)?ui:function(n){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.is(n))return o.encode(n)}throw new Error("no codec found to encode value in union type "+e)},t)}var Hi=function(t){function e(e,n,r,i,o){var s=t.call(this,e,n,r,i)||this;return s.types=o,s._tag="IntersectionType",s}return ri(e,t),e}(ai);var Wi=function(t){function e(e,n,r,i,o){var s=t.call(this,e,n,r,i)||this;return s.types=o,s._tag="TupleType",s}return ri(e,t),e}(ai);var zi=function(t){function e(e,n,r,i,o){var s=t.call(this,e,n,r,i)||this;return s.type=o,s._tag="ReadonlyType",s}return ri(e,t),e}(ai);function Yi(t,e){return void 0===e&&(e="Readonly<"+t.name+">"),new zi(e,t.is,t.validate,t.encode,t)}var Ki=function(t){function e(e,n,r,i,o){var s=t.call(this,e,n,r,i)||this;return s.type=o,s._tag="ReadonlyArrayType",s}return ri(e,t),e}(ai);function Ji(t,e){void 0===e&&(e="ReadonlyArray<"+t.name+">");var n=Ui(t);return new Ki(e,n.is,n.validate,n.encode,t)}var Xi=function(t){function e(e,n,r,i,o){var s=t.call(this,e,n,r,i)||this;return s.type=o,s._tag="ExactType",s}return ri(e,t),e}(ai);function Qi(t,e){void 0===e&&(e=function(t){return Si(t)?"{| "+di(t.props)+" |}":function(t){return"PartialType"===t._tag}(t)?gi("{| "+di(t.props)+" |}"):"Exact<"+t.name+">"}(t));var n=yi(t);return new Xi(e,t.is,(function(e,r){var i=Ni.validate(e,r);if(Zr(i))return i;var o=t.validate(e,r);return Zr(o)?o:ei(_i(o.right,n))}),(function(e){return t.encode(_i(e,n))}),t)}new(function(t){function e(){var e=t.call(this,"Function",(function(t){return"function"==typeof t}),(function(t,n){return e.is(t)?ci(t):si(t,n)}),ui)||this;return e._tag="FunctionType",e}return ri(e,t),e}(ai));var Zi=function(t){function e(e,n,r,i,o,s){var c=t.call(this,e,n,r,i,o)||this;return c.tag=s,c}return ri(e,t),e}(Gi);new(function(t){function e(){var e=t.call(this,"never",(function(t){return!1}),(function(t,e){return si(t,e)}),(function(){throw new Error("cannot encode never")}))||this;return e._tag="NeverType",e}return ri(e,t),e}(ai)),new(function(t){function e(){var e=t.call(this,"any",(function(t){return!0}),ci,ui)||this;return e._tag="AnyType",e}return ri(e,t),e}(ai)),new(function(t){function e(){var e=t.call(this,"object",(function(t){return null!==t&&"object"==typeof t}),(function(t,n){return e.is(t)?ci(t):si(t,n)}),ui)||this;return e._tag="ObjectType",e}return ri(e,t),e}(ai));function to(t,e,n){return void 0===n&&(n="("+t.name+" | "+function(t){return t.displayName||t.name||"<function"+t.length+">"}(e)+")"),new ji(n,(function(n){return t.is(n)&&e(n)}),(function(n,r){var i=t.validate(n,r);if(Zr(i))return i;var o=i.right;return e(o)?ci(o):si(o,r)}),t.encode,t,e)}to(Pi,Number.isInteger,"Integer"),function(t){function e(e,n,r,i,o){var s=t.call(this,e,n,r,i)||this;return s.props=o,s._tag="StrictType",s}ri(e,t)}(ai);const eo=new ai("ISODate",(t=>t instanceof Date),((t,e)=>{if("string"==typeof t){const e=new Date(t);if(!isNaN(e.getTime()))return ci(e)}return si(t,e)}),(t=>t.toISOString()));function no(t,e){const n=Vi(t,e);return new $i(null!=e?e:`partialAsUndefined(${n.name})`,n.is,((e,r)=>{if(!e||"object"!=typeof e)return n.validate(e,r);const i={...e};for(const e in t)e in i||(i[e]=void 0);return n.validate(i,r)}),n.encode,t)}function ro(t){return qi([t,ki])}function io(t,e,n){return new ai(null!=n?n:`withDefault(${t.name})`,t.is,((n,r)=>void 0===n?ci(e):t.validate(n,r)),t.encode)}const oo=Vi({chrome:Ri,edge:Ri,firefox:Ri,safari:Ri},"SwitchByBrowser"),so=Yi(Vi({legacyStopWorkingDate:eo}),"SafariAppExtensionMigrationDynamicConfig"),co=Yi(no({enableByBrowser:oo}),"GmailSendEmailPopupDynamicConfig"),ao=Bi({domain:Oi,matchSubdomains:Ri,allowedOriginPatterns:qi([Ui(Oi),ki]),disableByBrowser:ro(oo)},"IframeIntegrationDomainRule"),uo=Yi(Qi(Bi({enableGeneric:io(Ri,!1),enableByDomain:io(Ui(ao),[]),enableByBrowser:io(oo,{chrome:!0,edge:!0})})),"IframeIntegrationDynamicConfig"),lo=Yi(no({enableByBrowser:oo}),"DraggableGButtonDynamicConfig"),fo=Yi(no({disabled:Ri,disabledInOutlook:Ri,disabledInGmail:Ri,bannedPhrases:Ui(Ui(qi([Oi,Ti])))}),"AutocompleteDynamicConfig"),ho=Yi(Vi({disabled:Ri,useHeatmapCanvas:Ri,onboardingEnabled:Ri}),"ReadersAttentionDynamicConfig"),po=Yi(Bi({enableByBrowser:ro(oo),turnaroundTime:Pi}),"ProofitDynamicConfig"),bo=Yi(Vi({enableByBrowser:oo}),"SmartPhrasesDynamicConfig"),go=Yi(Vi({enableByBrowser:oo}),"ToneAIDynamicConfig"),mo=Yi(Vi({enableByBrowser:oo}),"EthicalAIDynamicConfig"),vo=Yi(Vi({enableByBrowser:oo}),"ManakinExperimentDynamicConfig"),yo=Yi(Vi({enableByBrowser:oo}),"SentenceLevelBrandTonesDynamicConfig"),_o=Yi(no({disabled:Ri,disabledByDomainPattern:Ui(Oi)}),"GapTransformCardDynamicConfig"),wo=Yi(Vi({enabled:Ri,disabledByDomain:Ui(Oi)}),"LlamaIntegrationDynamicConfig"),xo=Yi(no({disabled:Ri,bannedDict:Ui(Oi),bannedCorrections:Ui(function(t,e){void 0===e&&(e="["+t.map((function(t){return t.name})).join(", ")+"]");var n=t.length;return new Wi(e,(function(e){return Di.is(e)&&e.length===n&&t.every((function(t,n){return t.is(e[n])}))}),(function(e,r){var i=Di.validate(e,r);if(Zr(i))return i;for(var o=i.right,s=o.length>n?o.slice(0,n):o,c=[],a=0;a<n;a++){var u=o[a],l=t[a],f=l.validate(u,li(r,String(a),l,u));if(Zr(f))fi(c,f.left);else{var h=f.right;h!==u&&(s===o&&(s=o.slice()),s[a]=h)}}return c.length>0?oi(c):ci(s)}),pi(t)?ui:function(e){return t.map((function(t,n){return t.encode(e[n])}))},t)}([Oi,qi([Oi,Ti])]))}),"AutocorrectDynamicConfig"),Eo=Yi(Bi({enableCanvas:Ri,highlightColors:Ui(Oi),underlineColors:Ui(Oi)}),"GDocsCanvasConfigDynamicConfig"),So=Yi(Vi({disabled:Ri,disableByBrowser:oo,disableByDomain:Ji(Oi)}),"ShortenItDynamicConfig"),Ao=Yi(Vi({disabled:Ri,disableByBrowser:oo,disableByDomain:Ji(Oi)}),"AttentionScoreCardDynamicConfig"),Co=Yi(Vi({disabled:Ri,disableByBrowser:oo,disableByDomain:Ji(Oi)}),"ConsistencyCardDynamicConfig"),Io=Yi(Vi({enabled:Ri,excludeClassNames:Ji(Oi),excludeSelectors:Ji(Oi)}),"SlatejsDynamicConfig"),To=Yi(Vi({triggerURLs:Ji(Oi)}),"DraftAIUpsellDynamicConfig"),ko=Qi(no({safariAppExtensionMigration:so,newRichTextFieldsEnabled:Ri,fluidDisabledForFirefox:Ri,fluidDisabledForSafari:Ri,autocomplete:fo,autocorrect:xo,gmailSendEmailPopup:co,fullSentenceRewritesDisabled:Ri,overrideKey:io(Oi,"dynamicConfigOverrideKey"),iframeIntegration:uo,showExtensionConflictPopup:Ri,readersAttention:ho,ungatingRenewalNotificationEnabled:Ri,proofit:po,refreshExperimentsInterval:Pi,throttlePerformanceInterval:Pi,quillJSCatchAllDisabled:Ri,smartPhrases:bo,toneAI:go,draggableGButton:lo,manakinExperiment:vo,sentenceLevelBrandTones:yo,requireAuthCookieAccess:Ri,boomerangEnabled:Ri,gapTransformCard:_o,llamaIntegration:wo,highlightsBlendingEnabled:Ri,gDocsCanvasConfig:Eo,shortenIt:So,attentionScoreCard:Ao,confidentialModeEnabled:Ri,consistencyCard:Co,slatejs:Io,dlpEnabled:Ri,draftAIUpsell:To,ethicalAI:mo})),Oo={safariAppExtensionMigration:"safariAppExtensionMigration_1558396627629",newRichTextFieldsEnabled:"newRichTextFieldsEnabled_1567530773088",fluidDisabledForFirefox:"fluidDisabledForFirefox_1567530773089",fluidDisabledForSafari:"fluidDisabledForSafari_1567530773090",autocorrect:"autocorrect_1579700246281",autocomplete:"autocomplete_1591162228085",gmailSendEmailPopup:"gmailSendEmailPopup_1588710046696",fullSentenceRewritesDisabled:"fullSentenceRewritesDisabled_1595353312714",iframeIntegration:"iframeIntegration_1593643390051",overrideKey:"overrideKeyName_1596156512364",showExtensionConflictPopup:"showExtensionConflictPopup_1597916739172",readersAttention:"readersAttention_1597884313725",ungatingRenewalNotificationEnabled:"ungatingRenewalNotificationEnabled_1599074790962",proofit:"proofit_1600711036876",refreshExperimentsInterval:"refreshExperimentsInterval_1601638971190",throttlePerformanceInterval:"throttlePerformanceInterval_1603889683416",quillJSCatchAllDisabled:"quillJSCatchAllDisabled_1606352678466",smartPhrases:"smartPhrases_1610388437186",toneAI:"toneAI_1622644675216",draggableGButton:"draggableGButton_1610396074136",manakinExperiment:"manakinExperiment_1614377586742",sentenceLevelBrandTones:"sentenceLevelBrandTones_1614289097065",requireAuthCookieAccess:"requireAuthCookieAccess_1614620202105",boomerangEnabled:"boomerangEnabled_1618406216473",gapTransformCard:"gapTransformCard_1618874880869",llamaIntegration:"llamaIntegration_1620108441433",highlightsBlendingEnabled:"highlightsBlendingEnabled_1620339604804",gDocsCanvasConfig:"gDocsCanvasConfig_1621558551011",shortenIt:"shortenIt_1622820878915",attentionScoreCard:"attentionScoreCard_1627677830344",confidentialModeEnabled:"confidentialModeEnabled_1622017526624",consistencyCard:"consistencyCard_1623273583508",slatejs:"slatejs_1624453574243",dlpEnabled:"dlpEnabled_1623225997151",draftAIUpsell:"draftAIUpsell_1627424945372",ethicalAI:"ethicalAI_1627579461366"};Yi(function(t,e){void 0===e&&(e="("+t.map((function(t){return t.name})).join(" & ")+")");var n=t.length;return new Hi(e,(function(e){return t.every((function(t){return t.is(e)}))}),0===t.length?ci:function(e,r){for(var i=[],o=[],s=0;s<n;s++){var c=t[s],a=c.validate(e,li(r,String(s),c,e));Zr(a)?fi(o,a.left):i.push(a.right)}return o.length>0?oi(o):ci(vi(e,i))},0===t.length?ui:function(e){return vi(e,t.map((function(t){return t.encode(e)})))},t)}([function(t,e,n){const r={};for(const[t,n]of Object.entries(e))r[n]=t;return new ai(null!=n?n:`mapped(${t.name})`,t.is,((e,n)=>{if(!e||"object"!=typeof e)return t.validate(e,n);const i={};for(const t in e)t in r?i[r[t]]=e[t]:i[t]=e[t];return t.validate(i,n)}),(n=>{const r=t.encode(n);if(!r)return r;const i={};for(const t in r)t in e?i[e[t]]=r[t]:i[t]=r[t];return i}))}(ko,Oo),Qi(Bi({version:Oi}))]),"DynamicConfigData");const Po=t=>t===Object(t)&&!Array.isArray(t),Ro=(t,...e)=>{if(!e.length)return t;const n=t;if(Po(n)){const t=e.length;for(let r=0;r<t;r+=1){const t=e[r];if(Po(t))for(const e in t)t.hasOwnProperty(e)&&(Po(t[e])?(n[e]&&Po(n[e])||(n[e]={}),Ro(n[e],t[e])):Array.isArray(n[e])&&Array.isArray(t[e])?n[e]=Array.from(new Set(n[e].concat(t[e]))):n[e]=Array.isArray(t[e])?Array.from(t[e]):t[e])}}return n};const Do=(t,e)=>{const n={getAll:async()=>await r.getAll(),get:async t=>await r.get(t),view:()=>{throw new Error("not_implemented")},patch:async t=>await r.set(t),changes:(r=t.browserApi.preferences).changes};var r;const i=Ae(n.changes.pipe(Gn(null),Yr((()=>n.getAll()))),Dn(m(5,(o=2,Ar/o),(()=>t.bgRpc.api.getPageConfig(e,self.location.href))).catch((t=>null))).pipe(Gn(null)),((t,n)=>{var r,i,o,s,c,a;const u=null!==(i=null===(r=t.extensionSettings)||void 0===r?void 0:r[e])&&void 0!==i?i:{},l=(null===(o=null==u?void 0:u.enabled)||void 0===o||o)&&(null===(s=null==n?void 0:n.enabled)||void 0===s||s);return{user:null!==(c=t.user)&&void 0!==c?c:Jr.defaultUser,settings:t.extensionSettings,dynamicConfig:Ro(t.dynamicConfig?{llamaIntegration:ni(wo,t.dynamicConfig[Oo.llamaIntegration])}:{},null!==(a=t.dynamicConfigOverrideKey)&&void 0!==a?a:{}),enabled:l}}));var o;return{storeLite:n,viewStoreLite:i}};var No=n(57238);const jo="grExtInstalled",Lo="grExtDisabled";function Fo(t){null===t&&"next"===document.body.dataset[Lo]||(null===t?delete document.body.dataset[Lo]:document.body.dataset[Lo]=t)}class Uo{constructor(t,e){this._bgRpc=t,this._csShareStorage=e,this._pageEnable=!0,this._enabledDefs=!1,this._isAnonymous=!0,this._wasLoaded=!1,this._isDesktopIntegrationEnable=!1,this._mutations=Dr.createFlattenHot(self.document,{childList:!0,subtree:!0}),this._textFieldsObservable=Cr.createFocusObservable(self.document,this._mutations),this._subs=[this._textFieldsObservable.subscribe((t=>{const e=t.owner.frame||t.element,n=or.get(e);this._pageEnable&&(n.generic||n.specific)&&this.load()})),Uo.clickObserver.subscribe((t=>{2===t.detail&&this._enabledDefs&&this._pageEnable&&!this._isAnonymous&&Bo.isValid()&&(this._csShareStorage.set("extensionDictionaryEvent",t),this._subs.push(Bo.animation()),this.load())}))],(t=>{if(self.location.href.includes("grammarly.com/extension-success")){const e=document.getElementById("click-to-run");e&&(e.onclick=()=>{var e,n;confirm("Always allow Grammarly to run on every website")?(t.api.enableClickToRunOnAllWebsites(),null===(e=document.getElementById("click-to-run-success"))||void 0===e||e.click()):null===(n=document.getElementById("click-to-run-fail"))||void 0===n||n.click()})}})(t)}load(){this._wasLoaded&&!this._isDesktopIntegrationEnable||(this._wasLoaded=!0,$o.callExecuteContentScript(),this.dispose(),this._bgRpc.api.loadContentScript())}dispose(){this._subs.forEach((t=>t.unsubscribe()))}updateState(t,e,n,r){this._isDesktopIntegrationEnable=r,!this._pageEnable&&e&&this.load(),this._isAnonymous=t,this._pageEnable=e,this._enabledDefs=n,Fo(this._pageEnable?null:"forever")}}var Mo,Bo,$o;!function(t){t.clickObserver=cn(self.document,"click",!0),t.start=async function(e){$o.checkScriptInitStart();const n=Tr(),r=rr.init({...e,skipInitExtensionApi:!0}),i=new t(r.bgRpc,r.csShareStorage),o=Rr.init(),s=Mo.init(r.config,n),{viewStoreLite:c}=Do(r,n),a=c.subscribe((t=>{var e,r,s,c;const a=null===(e=t.settings)||void 0===e?void 0:e.common;i.updateState(null===(s=null===(r=t.user)||void 0===r?void 0:r.anonymous)||void 0===s||s,t.enabled,null!==(c=null==a?void 0:a.enabledDefs)&&void 0!==c&&c,Or.isIntegrationEnable(a,n,t.dynamicConfig)),o.updateState(n,t.dynamicConfig,a)})),u=[i,s,o];Ye("contentScript-disconnected",(()=>{a.unsubscribe(),r.csShareStorage.clean(),u.forEach((t=>t&&t.dispose()))})),$o.checkScriptInitEnd(r.bgRpc)}}(Uo||(Uo={})),function(t){t.init=function(t,e){const n=[];return document.body.dataset.newGrCSCheckLoaded=t.buildInfo.version,document.body.dataset[jo]="",self.location.protocol===t.appConfig.url.grammarlyProtocol&&e.match(`^([a-z\\-0-9]+\\.)*${t.appConfig.url.grammarlyDomain}$`)&&n.push(Wr()),{dispose:()=>{n.forEach((t=>t.dispose()))}}}}(Mo||(Mo={})),function(t){const e="important";function n(t){return t+"px"}t.isValid=function(){const t=self.document.getSelection();return!(!t||t.toString().match(/[0-9_±!@#$%^&*:"|<>?~().,:}{’='-/ /]/))&&zr(t,self.document)},t.animation=function(){const t=document.createElement("div"),r=t.attachShadow({mode:"open"}),i=document.createElement("style");i.innerHTML=No.__css,r.appendChild(i);const o=self.document.getSelection().getRangeAt(0).getBoundingClientRect(),s=document.createElement("div");s.style.setProperty("top",n(o.top),e),s.style.setProperty("left",n(o.left),e),s.style.setProperty("height",n(o.height),e),s.style.setProperty("max-width",n(o.width),e),s.style.setProperty("z-index",ir.toString(),e),s.classList.add(No.animatedUnderline,No.checkAnimatedUnderline),r.appendChild(s),document.body.appendChild(t);const c=dn(10),a=Ae(Uo.clickObserver.pipe(function(t,e){var n=arguments.length>=2;return function(r){return r.pipe(t?Bt((function(e,n){return t(e,n,r)})):vt,yn(1),n?xn(e):An((function(){return new bn})))}}(),(u=!1,function(t){return t.lift(new kn(u))}),Gn(!0),qn()),c.pipe(rn((()=>{const t="."+Nr.completeAnimation;if(document.querySelector(t))return!0;const e=Array.from(document.querySelectorAll("grammarly-extension"));for(const n of e)if(n.shadowRoot&&n.shadowRoot.querySelector(t))return!0;return!1})),Gn(!1),qn())).pipe(Bt((([t,e])=>!t||e)),qn()).subscribe(l);var u;return{unsubscribe:l};function l(){a.unsubscribe(),t.remove()}}}(Bo||(Bo={})),function(t){const e=Date.now(),n=t=>self.performance.mark("@grammarly-extension:"+t);t.callExecuteContentScript=()=>n("callExecuteContentScript"),t.checkScriptInitEnd=t=>{const r=Math.random()<.01;if(n("checkScriptInitEnd"),t.api.feMetricsLogRate("checkScriptInitialized"),r){const t=Date.now();en("tracking-call",{msg:"tracking/RPC",data:["sendFelogEvent",{ex_csInitPerf:{domain:self.location.host,initTime:t-e,pageLoadTime:t-self.performance.timing.responseEnd},hideUserInfo:!0,level:"INFO",logger:"checkScript.initialized"}]})}},t.checkScriptInitStart=()=>n("checkScriptInitStart")}($o||($o={}));const Vo="%appName%",Go={extensionSettingsToolbar:"%appName%SettingsToolbar",gdocsSidebarCardList:"%appName%GDocsSidebarAssistantList",assistantCardList:"%appName%AssistantList",extensionSettingsAssistant:"%appName%AssistantSettings",gdocsGoals:"%appName%AssistantGoals",extensionBusinessUphookPopup:"gb%appName%UphookPopup",gbExtensionSettingsToolbar:"gb%appName%SettingsToolbar",gbExtensionSettingsAssistant:"gb%appName%AssistantSettings",gdocsSidebarSuccessView:"%appName%GDocsSidebarAssistantSuccessView",extensionGButton:"%appName%GButton"};function qo(t,e){return{key:t,value:e}}function Ho(t){return Go[t]?Go[t].replace(Vo,((t,e)=>{const n=w.getAppName(H(),V().bundleInfo.extensionType);return 0===e?n:(r=n).charAt(0).toUpperCase()+r.slice(1);var r})):t}function Wo(t,e){return qo(t,e)}function zo(t){return t.map((t=>[t.key,t.value].map(encodeURIComponent).join("="))).join("&")}function Yo(t,e){if(0===e.length)return t;const n=t.includes("?");return[t,zo(e)].join(n?"&":"?")}function Ko(t){const e=[];return void 0!==t.medium&&e.push(Wo("utm_medium",t.medium)),void 0!==t.source&&e.push(Wo("utm_source",t.source)),void 0!==t.campaign&&e.push(Wo("utm_campaign",Ho(t.campaign))),t.clickToRun&&e.push(Wo("click_to_run","true")),e}function Jo(t){return Ko(t)}qo("fromExtension",""+!0);Ko({medium:"internal"})[0];function Xo(t,e){return Yo(V().appConfig.url.upgrade,Jo({medium:"internal",source:t,campaign:e}))}function Qo(t){const e=t.reduce(((t,e)=>{const n=t.get(e.category),r="SmartPhrases"===e.category?"Suggested phrases":e.group;return n?n.count++:t.set(e.category,{group:r,categoryHuman:e.categoryHuman,count:1}),t}),new Map);return Array.from(e.values()).sort(((t,e)=>e.count-t.count))}function Zo(t){const e=new Map;for(const{isFree:n,cardLayout:{group:r}}of t){e.has(r)||e.set(r,{lensName:r,free:0,premium:0});const t=e.get(r);t&&(t[n?"free":"premium"]+=1)}return Array.from(e.values()).sort(((t,e)=>e.premium-t.premium))}function ts(t){return btoa(JSON.stringify(t))}class es extends class{constructor(){this._log=Ie.create("extension-api.alarms.stub"),this._warning="Method is not implemented"}create(t,e){return this._log.warn(this._warning),{dispose:g}}}{create(t,e){let n=null;const r=setTimeout((()=>{e.period&&(n=setInterval(t,e.period)),t()}),e.delay);return{dispose:()=>{clearTimeout(r),null!==n&&clearInterval(n)}}}}function ns(t,e){chrome.runtime.lastError?e(chrome.runtime.lastError):t()}class rs{constructor(){this._log=Ie.create("extension-api.managed-storage.validator")}validate(t,e){switch(t){case"GrammarlyEnrollmentToken":return"string"==typeof e&&e.length>0&&/^[a-z0-9_-]+$/i.test(e);case"GrammarlyBlockedClients":case"GrammarlyBlockedDomains":return"string"==typeof e;case"GrammarlyConfidentialModeEnabled":case"GrammarlyDlpEnabled":return"boolean"==typeof e;default:return this._log.warn(`Unknown key: ${t}`),!1}}}class is{constructor(){this._log=Ie.create("extension-api.managed-storage.chrome"),this._validator=new rs}get(t){return new Promise(((e,n)=>{chrome.storage.managed.get(t,(r=>{ns((()=>{const n=r[t];void 0===n||this._validator.validate(t,n)?e(n):(this._log.warn(`Invalid value for "${t}": ${JSON.stringify(r[t])}`),e(void 0))}),(e=>{this._log.error(`Could not get "${t}"`,e),n(e)}))}))}))}}const os="bridge",ss="message:to-priv",cs="message:to-non-priv";var as;!function(t){t[t.success=0]="success",t[t.successWithEmpty=1]="successWithEmpty",t[t.alreadyMigrated=2]="alreadyMigrated"}(as||(as={}));const us=Ie.create("extension-api.message"),ls=()=>{};class fs{constructor(){this._listeners={},this._queue={},this.fire=(t,e,n=ls,r)=>{const i=this._listeners[t]||[];i.length?i.forEach((t=>t(e,n,r))):(this._queue[t]=this._queue[t]||[],this._queue[t].push({content:e,callback:n,sender:r}))},this.unlisten=(t,e)=>{const n=this._listeners[t]||[],r=n.indexOf(e);-1!==r&&(1===n.length?delete this._listeners[t]:n.splice(r,1))},this.listenOnce=(t,e)=>{const n=(r,i,o)=>{this.unlisten(t,n),e&&e(r,i,o)};this.listen(t,n)},this.listen=(t,e)=>{this._listeners[t]=this._listeners[t]||[],-1===this._listeners[t].indexOf(e)&&this._listeners[t].push(e);const n=this._queue[t]||[];if(n.length){for(const t of n)try{e(t.content,t.callback,t.sender)}catch(t){us.error("exception during proccesing buffered messages",t)}delete this._queue[t]}}}}const hs=Ie.create("extension-api.message.bg"),ds="popup";function ps(t){const{browser:e,extensionType:n}=V().bundleInfo;if(!t)return"safariIOSWebExtension"===n;const r="firefox"===e?/^moz-extension:\/\/.*\/src\/popup.html$/:"safariWebExtension"===n||"safariIOSWebExtension"===n?/^safari-web-extension:\/\/.*\/src\/popup.html$/:"chrome"===e||"edge"===e?chrome&&chrome.runtime&&chrome.runtime.id?new RegExp(chrome.runtime.id+"/src/popup.html"):void 0:d(e);return void 0!==r&&r.test(t)}class bs{constructor(t,e,n){this._getActiveTab=e,this._getAllTabs=n,this.kind="background-message-api",this.topFrameId="0",this._callbacks={},this._tabPorts={popup:[]},this._messageHelper=new fs,this._sendMessageToPorts=(t,e)=>{const n=this._tabPorts[t];n&&n.forEach((t=>t.postMessage(e)))},this.toFocused=(t,e)=>this._getActiveTab().then((({id:n,url:r}={})=>{if(n)return ps(r)?hs.warn(`toFocussed not allowed for popup when it open like regular tab ${t}`,e):void this._sendMessageToPorts(n.toString(),{type:t,content:e,callid:o()})})),this.broadcast=(t,e)=>{if(!e)return;const n=({id:n,url:r})=>{n&&r&&-1===r.indexOf("chrome-extension:")&&this._sendMessageToPorts(n.toString(),{type:t,callid:o(),content:e})};this._getAllTabs().then((t=>t.forEach(n))),this._tabPorts.popup&&this._tabPorts.popup.length&&this._getActiveTab().then((({url:t}={})=>{n({id:ds,url:t})}))},this._initPortListener=t=>{if(t.name===os)t.onMessage((t=>{"message.toFocussed"===t.method&&this.toFocused(t.params&&t.params.type,t.params&&t.params.content)}));else if(t.name===cs)t.onMessage((t=>this.broadcast(t.type,t.content)));else if(t.name===ss){const{sender:e}=t;if(e){if(e.tab){const{id:n,url:r}=e.tab;if(n){let e=this._tabPorts[n];void 0===e&&(e=this._tabPorts[n]=[]),e.push(t)}r&&0===r.indexOf("http")&&this._messageHelper.fire("tab-connected",{tab:n,url:r}),t.onDisconnect((()=>{if(!n)return;const e=this._tabPorts[n];e&&e.splice(e.indexOf(t),1)}))}if(ps(e.url?e.url:e.tab?e.tab.url:"")){const e=ds;this._tabPorts[e]=this._tabPorts[e]||[],this._tabPorts[e].push(t),t.onDisconnect((()=>{const n=this._tabPorts[e];n.splice(n.indexOf(t),1)}))}}t.onMessage((n=>{const r=({callid:n,content:r,type:i})=>{this._callbacks[n]&&(this._callbacks[n](r),delete this._callbacks[n]);this._messageHelper.fire(i,r,(e=>t.postMessage({content:e,callid:n})),e&&e.tab?{tabId:String(e.tab.id),frameId:void 0===e.frameId?void 0:String(e.frameId)}:{tabId:ds})};"tab-connected"===n.type?this._getActiveTab().then((({url:t}={})=>{n.content={tab:ds,url:t},r(n)})):r(n)}))}},t(this._initPortListener)}getPortExists(t){return!!this._tabPorts[t]}sendTo(t,e,n,r,i,s){var c;const{tabId:a,frameId:u=null}="object"==typeof t?t:{tabId:String(t)},l=null===(c=this._tabPorts[a])||void 0===c?void 0:c.filter((t=>null===u||void 0!==t.sender.frameId&&String(t.sender.frameId)===u));if(!l||!l.length)return void(i&&i({message:"no ports on specified destination"}));const f=s?l.filter((t=>s(t.sender&&t.sender.url))):l;if(!f.length)return void(i&&i({message:"no ports on specified tabFilter"}));const h={type:e,content:n};r&&"function"==typeof r&&(h.callid=o(),this._callbacks[h.callid]=r),f.forEach((t=>t.postMessage(h)))}listen(t,e){this._messageHelper.listen(t,e)}}const gs=Ie.create("Messaging.extension-api.content");class ms{constructor(t){this.kind="content-script-message-api",this._callbacks={},this._messageHelper=new fs,this._disconnected=!1,this.broadcastBackground=(...t)=>this._emit(this.backgroundPort,"bg").apply(null,t),this.broadcast=(...t)=>this._emit(this.broadcastPort,"tabs").apply(null,t),this._onPortMessage=t=>{gs.trace("portMessage",t)},this._emit=(t,e)=>(n,r,i,s)=>{const c=o();i&&"function"==typeof i&&(this._callbacks[c]=i);try{if(!t)throw new Error("lost connection to "+e+" port");t.postMessage({type:n,callid:c,content:r})}catch(t){if(!s)throw t;s(t)}},this._onBgPortMessage=({callid:t,content:e,type:n})=>{this._callbacks[t]?(this._callbacks[t](e),delete this._callbacks[t]):this._messageHelper.fire(n,e,(e=>{if(!this.backgroundPort)throw new Error("fail reply to bg page - connection lost");this.backgroundPort.postMessage({content:e,callid:t})}))},this._portInit=t,this.initPorts()}initPorts(){const t=this._portInit;this.port=t(os),this.port.onMessage(this._onPortMessage),this.port.onDisconnect((()=>{this.port=null,this._onDisconnect()})),this.backgroundPort=t(ss),this.backgroundPort.onMessage(this._onBgPortMessage),this.backgroundPort.onDisconnect((()=>{this.backgroundPort=null,this._onDisconnect()})),this.broadcastPort=t(cs),this.broadcastPort.onDisconnect((()=>{this.broadcastPort=null,this._onDisconnect()}))}onBackgroundPortReconnect(t){this.backgroundPort&&this.backgroundPort.onReconnect&&this.backgroundPort.onReconnect(t)}listen(t,e){this._messageHelper.listen(t,e)}toFocused(t,e){return u.create((n=>{if(!this.port)throw new Error("lost connection to bg page");this.port.postMessage({method:"message.toFocussed",params:{type:t,content:e}}),n()}))}_onDisconnect(){this._disconnected||(this._disconnected=!0,gs.trace("Content script messaging went disconnected."),this._messageHelper.fire("contentScript-disconnected",null))}}class vs{constructor(t){this._manifestVersion=t,this.kind="web-extension",this.executeScript=(t,e,n)=>u.create(((r,i)=>{"3"!==this._manifestVersion?chrome.tabs.executeScript(e,{file:t,matchAboutBlank:!0,...n?{frameId:Number(n)}:{}},(t=>ys(t[0],r,i))):chrome.scripting.executeScript({files:[t],target:{tabId:e,...n?{frameIds:[Number(n)]}:{}}},(t=>{var e;return ys(null===(e=t[0])||void 0===e?void 0:e.result,r,i)}))})),this.executeFunction=(t,e,n)=>u.create(((r,i)=>{"3"!==this._manifestVersion?chrome.tabs.executeScript(e,{code:`(${t.toString()})()`,matchAboutBlank:!0,...n?{frameId:Number(n)}:{}},(t=>ys(t[0],r,i))):chrome.scripting.executeScript({function:t,target:{tabId:e,...n?{frameIds:[Number(n)]}:{}}},(t=>{var e;return ys(null===(e=t[0])||void 0===e?void 0:e.result,r,i)}))})),this.insertCSS=(t,e,n,r)=>u.create(((i,o)=>{"3"!==this._manifestVersion?chrome.tabs.insertCSS(t,{file:e,code:n,matchAboutBlank:!0,...r?{frameId:Number(r)}:{}},(()=>ys(void 0,i,o))):chrome.scripting.insertCSS({target:{tabId:t,...r?{frameIds:[Number(r)]}:{}},files:e?[e]:void 0,css:n},(()=>ys(void 0,i,o)))}))}open(t,e){return u.create(((n,r)=>{chrome.tabs.create({url:t,active:e},(t=>{ns((()=>n(t)),r)}))}))}updateCurrent(t){return u.create(((e,n)=>{chrome.tabs.update({url:t},(t=>{ns((()=>e(t)),n)}))}))}getActiveTab(){return u.create(((t,e)=>{const n=chrome.tabs;n.query({active:!0,lastFocusedWindow:!0},(r=>{ns((()=>{r&&r.length?t(r[0]):n.query({active:!0},(n=>{ns((()=>{t(n[0])}),e)}))}),e)}))}))}getAllTabs(){return u.create(((t,e)=>chrome.tabs.query({},(n=>ns((()=>t(n)),e)))))}getActiveTabUrl(){return u.create(((t,e)=>this.getActiveTab().then((n=>ns((()=>t(n&&n.url)),e)))))}onActiveTabChange(t,e){const n=n=>{ns((()=>{n&&t(n)}),(n=>{e(n),"Tabs cannot be edited right now (user may be dragging a tab)."===(null==n?void 0:n.message)&&setTimeout((()=>{this.getActiveTab().then((n=>{n&&ns((()=>t(n)),e)}))}),100)}))};chrome.tabs.onActivated.addListener((t=>chrome.tabs.get(t.tabId,(t=>n(t))))),chrome.tabs.onUpdated.addListener(((t,e)=>{this.getActiveTab().then((r=>{r&&r.id===t&&(e.url||e.favIconUrl||"complete"===e.status)&&chrome.tabs.get(t,(t=>n(t)))}))})),chrome.windows.onFocusChanged.addListener((t=>chrome.tabs.query({active:!0,windowId:t,lastFocusedWindow:!0},(t=>n(t[0]))))),this.getActiveTab().then((t=>n(t)))}tabUrlChange(){return new _t((t=>{const e=(e,n,r)=>{"complete"===n.status&&t.next({id:e,url:r.url})};return chrome.tabs.onUpdated.addListener(e),()=>chrome.tabs.onUpdated.removeListener(e)}))}reload(t){return u.create(((e,n)=>{const r=()=>ns((()=>e()),n);t.id?chrome.tabs.reload(t.id,{},r):chrome.tabs.reload(r)}))}focusTab(t){return u.create(((e,n)=>{chrome.tabs.update(t,{highlighted:!0},(()=>{ns((()=>e()),n)}))}))}}function ys(t,n,r){e()?r(e()):n(t)}class _s{constructor(t){this.port=chrome.runtime.connect({name:t})}onMessage(t){this.port.onMessage.addListener(t)}onDisconnect(t){this.port.onDisconnect.addListener(t)}postMessage(t){this.port.postMessage(t)}}class ws{constructor(t){this._port=t,this.sender={};const{sender:e,name:n}=t;this.name=n,e&&(this.sender.url=e.url,this.sender.frameId=e.frameId,e.tab&&e.tab.url&&e.tab.id&&(this.sender.tab={url:e.tab.url,id:e.tab.id}))}onMessage(t){this._port.onMessage.addListener(t)}onDisconnect(t){this._port.onDisconnect.addListener(t)}postMessage(t){this._port.postMessage(t)}}class xs{constructor(t){this._manifestVersion="2",this._action="3"===this._manifestVersion?chrome.action:chrome.browserAction,this.alarms=new es,this.managedStorage=new is,this.tabs=new vs(this._manifestVersion),this.thirdPartyExtensionsInstalled={},this.notification={kind:"web-extension",create:t=>u.create(((e,n)=>{const r=chrome.notifications,i=o();r.create(i,Object.assign({type:"basic"},t),(()=>{ns((()=>{const t=new _t((t=>{const e=e=>e===i&&t.next(e);return r.onClicked.addListener(e),()=>r.onClicked.removeListener(e)})),n=new _t((t=>{const e=(e,n)=>e===i&&t.next({id:e,buttonIndex:n});return r.onButtonClicked.addListener(e),()=>r.onButtonClicked.removeListener(e)})),o=new _t((t=>{const e=(e,n)=>e===i&&t.next({id:e,byUser:n});return r.onClosed.addListener(e),()=>r.onClosed.removeListener(e)}));e({id:i,click:t,buttonClick:n,close:o})}),n)}))})),clear:t=>u.create(((e,n)=>{chrome.notifications.clear(t,(t=>{ns((()=>e(t)),n)}))}))},this.cookies={kind:"web-extension",get:t=>u.create(((e,n)=>chrome.cookies.get(t,(t=>ns((()=>e(t)),n))))),remove:t=>new Promise(((e,n)=>chrome.cookies.remove(t,(()=>ns((()=>e(null)),n))))),getAll:t=>u.create(((e,n)=>chrome.cookies.getAll(t,(t=>ns((()=>e(t)),n))))),set:t=>u.create(((e,n)=>chrome.cookies.set(t,(t=>ns((()=>e(t)),n))))),watch(t,e){const n=n=>{const{cookie:r,cause:i}=n;!r||!r.name||t.path&&t.path!==r.path||t.name!==r.name||t.domain&&-1===r.domain.indexOf(t.domain)||("explicit"===i&&e(r),"expired_overwrite"===i&&e())};return chrome.cookies.onChanged.addListener(n),()=>chrome.cookies.onChanged.removeListener(n)},getChanges(t){return new _t((e=>this.watch(t,(t=>e.next(t)))))}},this.preferences=(()=>{var t;const e=new At;return null===(t=chrome.storage)||void 0===t||t.onChanged.addListener(((t,n)=>{"local"===n&&e.next(t)})),{get:t=>u.create(((e,n)=>chrome.storage.local.get(t,(t=>{ns((()=>e(t)),n)})))),set:t=>u.create(((e,n)=>chrome.storage.local.set(t,(()=>{ns(e,n)})))),getAll:()=>u.create(((t,e)=>chrome.storage.local.get(null,(n=>{ns((()=>t(n)),e)})))),remove:t=>u.create(((e,n)=>chrome.storage.local.remove(t,(()=>{ns(e,n)})))),removeAll:()=>u.create(((t,e)=>chrome.storage.local.clear((()=>{ns(t,e)})))),changes:e}})(),this.management={uninstallSelf(){chrome.management.uninstallSelf()}},this._baseUrl=b((()=>chrome.runtime.getURL("")),(t=>null)),this.permissions=chrome.permissions?{watchAdded:t=>{chrome.permissions.onAdded.addListener(t)},added:new _t((t=>{const e=e=>{t.next(e)};return chrome.permissions.onAdded.addListener(e),()=>{chrome.permissions.onAdded.removeListener(e)}})),watchRemoved:t=>{chrome.permissions.onRemoved.addListener(t)},removed:new _t((t=>{const e=e=>{t.next(e)};return chrome.permissions.onRemoved.addListener(e),()=>{chrome.permissions.onRemoved.removeListener(e)}})),getAll:()=>new Promise((t=>chrome.permissions.getAll(t))),request:t=>new Promise(((e,n)=>chrome.permissions.request(t,(t=>{chrome.runtime.lastError?n(chrome.runtime.lastError):e(t)})))),contains:t=>new Promise(((e,n)=>{chrome.permissions.contains(t,(t=>{chrome.runtime.lastError?n(chrome.runtime.lastError):e(t)}))}))}:void 0,this.fetchBlocklistConfig=async()=>({}),this.getUrl=t=>this._baseUrl?this._baseUrl+t:chrome.runtime.getURL(t),this.fetchInternalResource=(t,e)=>fetch(this.getUrl(t)).then((t=>"json"===e?t.json():t.arrayBuffer())),this.openUrl=t=>this.tabs.open(t,!0),this.openPopupSubscriptionDialog=t=>this.openUrl(Xo(t.utmSource,t.utmCampaign)),this.openSubscriptionDialog=t=>function(t){const e=V().appConfig.url,n=t.showPlanComparison?e.planComparison:e.upgrade;self.open(Yo(n,[...t.isFromEmail?[qo("isFromEmail","1")]:[],qo("alerts",ts(Qo(t.currentAlerts))),qo("lensedAlerts",ts(Zo(t.currentAlerts))),qo("app_type","popup"),qo("browser",H()),...Jo({medium:"internal",source:t.isAnonymousUser?"signupHook":"upHook",campaign:t.forceUtmCampaign?t.forceUtmCampaign:t.isAnonymousUser?"extensionPremiumCta":"extensionGButton"})]))}(t),this.isExtensionUrl=(t,e)=>this.getUrl(t)===e,this.reload=()=>chrome.runtime.reload(),this.i18n={detectLanguage:t=>u.create(((e,n)=>chrome.i18n.detectLanguage(t,(t=>ns((()=>e(t)),n))))),getUILanguage:()=>chrome.i18n.getUILanguage(),getAcceptLanguages:()=>u.create(((t,e)=>chrome.i18n.getAcceptLanguages((n=>ns((()=>t(n)),e)))))},this.initCodeSplittingListener=()=>{return chrome.runtime.onMessage.addListener((t=this.tabs.executeScript,(e,n,r)=>{e&&"CODE_SPLITTING_INJECT"===e.type&&e.file&&n&&n.tab&&null!=n.tab.id&&(t(e.file,Number(n.tab.id),n.frameId),r())}));var t},this.isExtensionInstalled=async(t,e=!1)=>{if(!e&&void 0!==this.thirdPartyExtensionsInstalled[t])return this.thirdPartyExtensionsInstalled[t];if("undefined"==typeof fetch)return!1;const n=xs.thirdPartyExtensionsData[t].publicResources.reduce(((e,n)=>(G()&&e.push(`chrome-extension://${xs.thirdPartyExtensionsData[t].MSStoreId}${n}`),e.concat(`chrome-extension://${xs.thirdPartyExtensionsData[t].id}${n}`))),[]);return(r=n.map((t=>fetch(t))),l(Promise.all([...r].map(l)))).then((t=>!0)).catch((t=>!1));var r},this.message=t?new bs((t=>chrome.runtime.onConnect.addListener((e=>t(new ws(e))))),tt(this.tabs).getActiveTab,tt(this.tabs).getAllTabs):new ms((t=>new _s(t)))}get button(){const t=this._action;return{kind:"web-extension",setBadge(e){t.setBadgeText({text:e})},setIconByName(e){const n="./src/icon/icon",r=e?"-"+e:"";t.setIcon({path:{16:`${n}16${r}.png`,32:`${n}32${r}.png`}})},setBadgeBackgroundColor(e){t.setBadgeBackgroundColor({color:e})}}}get baseUri(){var t;return null!==(t=this._baseUrl)&&void 0!==t?t:chrome.runtime.getURL("")}}xs.thirdPartyExtensionsData={mseditor:{id:"gpaiobkfhnonedkhhfjpmhdalgeoebfa",MSStoreId:"hokifickgkhplphjiodbggjmoafhignh",publicResources:["/fonts/fabric-icons.css"]},office:{id:"ndjpnladcallmjemlbaebfadecfhkepb",MSStoreId:"gggmmkjegpiggikcnhidnjjhmicpibll",publicResources:["/fonts/fabric-icons.css"]}},Uo.start({browser:"chrome",extensionType:"chromiumWebExtension",browserApi:function(t){return new xs(t)}(!1)})})();