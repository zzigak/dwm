(self.webpackChunk=self.webpackChunk||[]).push([[7725],{72311:(e,t,n)=>{n.r(t),n.d(t,{ToneAIFeature:()=>w});var i=n(40327),r=n(17404),a=n(90361),s=n(88097),l=n(44586),o=n(14601),d=n(85985),p=n(77176),A=n(78674),u=n(16118),c=n(41398),T=n(17594),I=n(15646),h=n(75316),g=n(35416),b=n(5114),_=n(83078);class w{constructor(e,t){this._alertStateService=e,this._gnar=t}initCardActionsProcessing(e,t,n,a,c){return new l.y((()=>{const l=new o.w;return l.add(this._alertStateService.newlyHighlightedAlerts.pipe(d.h(r.S.isToneAIAlert)).subscribe((e=>this._gnar.toneAIAlertUnderlineShow(w._getToneRewriteType(e.patternName))))),l.add(a.pipe(d.h(h.C.isToneAIItem)).subscribe((e=>this._gnar.toneAIAssistantMiniCardShow(w._getToneRewriteType(e.activeAlert.patternName))))),l.add(e.pipe(d.h(I.lY.isAlertCardShow),p.U((e=>e.alertId)),A.b(300)).subscribe((e=>(0,i.pipe)(t.getById(e),b.filter(s.bZ.isToneAI),_.tap((e=>this._gnar.toneAIAssistantFullCardShow(w._getToneRewriteType(e.patternName)))))))),l.add(e.pipe(d.h(I.lY.isAlertApplyAction)).subscribe((e=>(0,i.pipe)(t.getById(e.alertId),b.filter(s.bZ.isToneAI),_.tap((e=>{this._gnar.toneAIAssistantFullCardReplacementApply(w._getToneRewriteType(e.patternName))})))))),w._subscribeToMuteOrUndoMuteButtonClick(l,e,n,I.lY.isMuteCategoryAction,(e=>this._gnar.toneAIAssistantFullCardMuteButtonClick(w._getToneRewriteType(e.patternName)))),w._subscribeToMuteOrUndoMuteButtonClick(l,e,n,I.lY.isUndoMuteCategoryAction,(e=>this._gnar.toneAIAssistantFullCardUndoMuteButtonClick(w._getToneRewriteType(e.patternName)))),l.add(c.pipe(d.h(T.$.isToneAI)).subscribe((e=>this._gnar.toneAIAlertUnderlineClick(w._getToneRewriteType(e.patternName))))),l.add(e.pipe(d.h(I.lY.isToneAIChangeToneAlternativeAction),u.G(),d.h((([e,t])=>e.selectedToneAlternativeIdx!==t.selectedToneAlternativeIdx)),p.U((([e,t])=>({alertId:t.alertId,oldToneAlternativeIdx:e.selectedToneAlternativeIdx,newToneAlternativeIdx:t.selectedToneAlternativeIdx})))).subscribe((({alertId:e,oldToneAlternativeIdx:n,newToneAlternativeIdx:r})=>(0,i.pipe)(t.getById(e),_.tap((e=>(0,i.pipe)(e.extraProperties.toneAI,_.tap((t=>{this._gnar.toneAIAssistantFullCardSliderMove(w._getToneRewriteType(e.patternName),t.toneAlternatives[n].name,t.toneAlternatives[r].name)}))))))))),()=>l.unsubscribe()}))}static _getToneRewriteType(e){return e.split("/").slice(2).join("/")}static _subscribeToMuteOrUndoMuteButtonClick(e,t,n,r,s){e.add(t.pipe(d.h(r),c.M(n),p.U((([e,t])=>g.nL.hasItems(t)?(0,i.pipe)(t.currentLens.items.get(e.id),b.fold((()=>null),(e=>e.value))):null)),d.h(a.fQ),d.h(h.C.isToneAIItem),p.U((e=>e.activeAlert))).subscribe(s))}}}}]);